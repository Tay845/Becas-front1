<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal del Comité de Becas - Sistema de Gestión</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="theme-styles.css">
    <style>
        /* Forzar visibilidad del modal */
        #modalDetalleSesion {
            display: none !important;
            pointer-events: none !important;
        }
        #modalDetalleSesion.active,
        #modalDetalleSesion[style*="flex"] {
            display: flex !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            width: 100% !important;
            height: 100% !important;
            align-items: center !important;
            justify-content: center !important;
            background: rgba(0,0,0,0.5) !important;
            z-index: 10002 !important;
            pointer-events: auto !important;
        }
        #modalDetalleSesion .modal-content {
            position: relative !important;
            z-index: 10003 !important;
            max-height: 80vh !important;
            overflow-y: auto !important;
            pointer-events: auto !important;
        }
        #modalDetalleSesion button {
            pointer-events: auto !important;
            cursor: pointer !important;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="mobile-menu-toggle" id="mobileMenuToggleCommittee">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1 class="logo">Sistema de Becas - Comité</h1>
        </div>
        <div class="header-center">
            <div class="search-bar">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM18 18l-4-4" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" />
                </svg>
                <input type="text" placeholder="Buscar solicitud, estudiante... (Ctrl+K)">
            </div>
        </div>
        <div class="header-right">
            <button class="btn-icon" title="Notificaciones">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M15 6.5a5 5 0 1 0-10 0c0 5-2 7-2 7h14s-2-2-2-7zM11.5 17a1.5 1.5 0 0 1-3 0"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                </svg>
                <span class="badge">5</span>
            </button>
            <div class="user-menu">
                <span class="user-name" id="committeeUserName">Miembro</span>
                <button class="btn btn-secondary btn-sm" onclick="logout()" style="margin-left: 10px;">Cerrar Sesión</button>
            </div>
        </div>
    </header>

    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebarCommittee">
            <nav class="nav">
                <div class="nav-section">
                    <span class="nav-section-title">Principal</span>
                    <a href="#" class="nav-item active" data-view="committee-dashboard">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5" />
                            <rect x="11" y="3" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5" />
                            <rect x="3" y="11" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5" />
                            <rect x="11" y="11" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5" />
                        </svg>
                        <span>Mi Dashboard</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">Evaluación</span>
                    <a href="#" class="nav-item" data-view="committee-pendientes">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5" />
                        </svg>
                        <span>Casos Pendientes</span>
                    </a>
                    <a href="#" class="nav-item" data-view="committee-evaluacion">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M14 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"
                                stroke="currentColor" stroke-width="1.5" />
                            <path d="M7 10h6M7 14h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                        <span>Evaluar Solicitud</span>
                    </a>
                    <a href="#" class="nav-item" data-view="committee-criterios">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M6 14v3M10 11v6M14 8v8" stroke="currentColor" stroke-width="1.5"
                                stroke-linecap="round" />
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5" />
                        </svg>
                        <span>Criterios de Evaluación</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">Gestión</span>
                    <a href="#" class="nav-item" data-view="committee-reuniones">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="7" cy="7" r="2" stroke="currentColor" stroke-width="1.5" />
                            <circle cx="13" cy="7" r="2" stroke="currentColor" stroke-width="1.5" />
                            <path d="M3 15v-1a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1M12 15v-1a3 3 0 0 1 3-3h2"
                                stroke="currentColor" stroke-width="1.5" />
                        </svg>
                        <span>Reuniones</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">Reportes</span>
                    <a href="#" class="nav-item" data-view="committee-reportes">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M6 14v3M10 11v6M14 8v8" stroke="currentColor" stroke-width="1.5"
                                stroke-linecap="round" />
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5" />
                        </svg>
                        <span>Reportes y Estadísticas</span>
                    </a>
                    <a href="#" class="nav-item" data-view="committee-historial">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16z" stroke="currentColor" stroke-width="1.5" />
                            <path d="M10 6v4l3 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                        <span>Historial de Evaluaciones</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">Configuración</span>
                    <a href="#" class="nav-item" data-view="committee-perfil">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="7" r="3" stroke="currentColor" stroke-width="1.5" />
                            <path d="M3 17v-2a4 4 0 0 1 4-4h6a4 4 0 0 1 4 4v2" stroke="currentColor"
                                stroke-width="1.5" />
                        </svg>
                        <span>Mi Perfil</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Committee Dashboard -->
            <div id="committee-dashboard-view" class="view active">
                <div class="view-header">
                    <div>
                        <h2 id="committeeGreeting">Bienvenido, <span id="committeeGreetingName">Miembro</span></h2>
                        <p class="text-muted">Panel de control del Comité de Becas</p>
                    </div>
                    <div class="header-actions">
                        <select class="select-sm" id="committeeQuarterFilter">
                            <option value="all">Todos los cuatrimestres</option>
                            <option value="2024-3">2024-3 (Sep-Dic)</option>
                            <option value="2024-2">2024-2 (May-Ago)</option>
                            <option value="2024-1" selected>2024-1 (Ene-Abr)</option>
                        </select>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Casos Pendientes</div>
                            <div class="stat-value">24</div>
                            <div class="stat-change">Requieren decisión</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Aprobadas este mes</div>
                            <div class="stat-value">42</div>
                            <div class="stat-change positive">+15% vs mes anterior</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path d="M8 8l8 8M16 8l-8 8" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Rechazadas este mes</div>
                            <div class="stat-value">8</div>
                            <div class="stat-change">Por incumplimiento de requisitos</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(99, 102, 241, 0.1); color: #6366f1;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Tasa Aprobación</div>
                            <div class="stat-value">84%</div>
                            <div class="stat-change">De todas las solicitudes</div>
                        </div>
                    </div>
                </div>

                <!-- Próxima Reunión (cargada dinámicamente) -->
                <div class="card">
                    <div class="card-header">
                        <h3>Próxima Reunión del Comité</h3>
                    </div>
                    <div class="card-body">
                        <div id="proximaSesionContainer">
                            <p class="text-muted">Cargando próxima sesión...</p>
                        </div>
                    </div>
                </div>

                <!-- Casos Pendientes (tabla dinámica) -->
                <div class="card">
                    <div class="card-header">
                        <h3>Casos Pendientes Recientes</h3>
                        <a href="#" class="btn btn-sm btn-primary" style="text-decoration: none;">Ver todos</a>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Solicitud</th>
                                        <th>Estado</th>
                                        <th>Nota Socio</th>
                                        <th>Nota Acad</th>
                                        <th>Total</th>
                                        <th>Acción</th>
                                    </tr>
                                </thead>
                                <tbody id="comiteCasosTableBody">
                                    <tr>
                                        <td colspan="7" class="text-muted">Cargando solicitudes...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Casos Pendientes -->
            <div id="committee-pendientes-view" class="view">
                <div class="view-header">
                    <div>
                        <h2>Casos Pendientes de Evaluación</h2>
                        <p class="text-muted">Solicitudes que requieren decisión del comité</p>
                    </div>
                    <div class="header-actions">
                        <select class="select-sm" id="pendientesQuarterFilter">
                            <option value="all">Todos los cuatrimestres</option>
                            <option value="2024-3">2024-3 (Sep-Dic)</option>
                            <option value="2024-2">2024-2 (May-Ago)</option>
                            <option value="2024-1" selected>2024-1 (Ene-Abr)</option>
                        </select>
                        <select class="select-sm">
                            <option>Filtrar por tipo</option>
                            <option>Académica</option>
                            <option>Integral</option>
                            <option>Emergencia</option>
                        </select>
                    </div>
                </div>

                <div class="application-grid"
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;">
                    <!-- ... aplicaciones pendientes ... -->
                </div>
            </div>

            <!-- Evaluación de Solicitud -->
            <div id="committee-evaluacion-view" class="view">
                <div class="view-header">
                    <h2>Evaluar Solicitud #SOL-2024-001</h2>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3>Información del Estudiante</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 20px;">
                                <div>
                                    <p id="evalStudentName" style="font-weight: 600; font-size: 16px; margin-bottom: 4px;">Carlos López Martínez</p>
                                    <p id="evalStudentEmail" style="color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">carlos@univ.edu</p>
                                    <p id="evalStudentCareer" style="color: var(--text-secondary); font-size: 14px;">Carrera: Ingeniería Informática</p>
                                </div>
                            </div>

                                <div style="border-top: 1px solid var(--border-color); padding-top: 16px;">
                                <p
                                    style="font-size: 13px; font-weight: 600; color: var(--text-muted); margin-bottom: 12px; text-transform: uppercase;">
                                    Documentos Adjuntos</p>
                                <div id="evalDocumentsList" style="display: flex; flex-direction: column; gap: 8px;">
                                    <div
                                        style="display: flex; align-items: center; gap: 8px; padding: 8px; background: var(--bg-tertiary); border-radius: 6px;">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                        </svg>
                                        <span style="font-size: 13px;">Formulario de solicitud.pdf</span>
                                    </div>
                                    <div
                                        style="display: flex; align-items: center; gap: 8px; padding: 8px; background: var(--bg-tertiary); border-radius: 6px;">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                                        </svg>
                                        <span style="font-size: 13px;">Análisis socioeconómico.pdf</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                <div class="card" style="margin-top:16px;">
                    <div class="card-header">
                        <h3>Decisión del Comité</h3>
                    </div>
                    <div class="card-body">
                        <input type="hidden" id="id_solicitud_actual" value="" />
                        <label for="resolucionMotivoVista" style="display:block; font-weight:600; margin-bottom:6px;">Motivo / Observaciones (opcional)</label>
                        <textarea id="resolucionMotivoVista" placeholder="Escribe el motivo o comentario de la decisión" style="width:100%; min-height:100px; margin-bottom:8px;"></textarea>
                        <div style="display:flex; gap:8px;">
                            <button class="btn btn-success" id="btnAprobarVista">Aprobar</button>
                            <button class="btn btn-danger" id="btnDenegarVista">Denegar</button>
                            <button class="btn btn-secondary" id="btnCerrarEvaluacion">Cerrar</button>
                        </div>
                    </div>
                </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Criterios de Evaluación</h3>
                        </div>
                        <div class="card-body">
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <label style="font-size: 14px; font-weight: 500;">Desempeño Académico</label>
                                        <span style="font-size: 12px; color: var(--text-secondary);">20/25</span>
                                    </div>
                                    <div
                                        style="width: 100%; height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 80%; height: 100%; background: #10b981;"></div>
                                    </div>
                                </div>

                                <div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <label style="font-size: 14px; font-weight: 500;">Situación
                                            Socioeconómica</label>
                                        <span style="font-size: 12px; color: var(--text-secondary);">22/25</span>
                                    </div>
                                    <div
                                        style="width: 100%; height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 88%; height: 100%; background: #10b981;"></div>
                                    </div>
                                </div>

                                <div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <label style="font-size: 14px; font-weight: 500;">Compromiso
                                            Institucional</label>
                                        <span style="font-size: 12px; color: var(--text-secondary);">18/20</span>
                                    </div>
                                    <div
                                        style="width: 100%; height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 90%; height: 100%; background: #10b981;"></div>
                                    </div>
                                </div>

                                <div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <label style="font-size: 14px; font-weight: 500;">Entrevista Personal</label>
                                        <span style="font-size: 12px; color: var(--text-secondary);">15/15</span>
                                    </div>
                                    <div
                                        style="width: 100%; height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 100%; height: 100%; background: #10b981;"></div>
                                    </div>
                                </div>

                                <div
                                    style="border-top: 1px solid var(--border-color); padding-top: 12px; margin-top: 12px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-weight: 600;">Puntuación Total</span>
                                        <span style="font-size: 24px; font-weight: 700; color: #10b981;">92/100</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Se ha eliminado el bloque de 'Decisión del Comité' (sistema de votación) -->
            </div>

            <!-- Criterios de Evaluación -->
            <div id="committee-criterios-view" class="view">
                <div class="view-header">
                    <h2>Criterios de Evaluación del Comité</h2>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3>Criterio 1: Desempeño Académico</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 12px;">
                                <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Puntuación
                                    Máxima: 25 puntos</p>
                                <p style="line-height: 1.6;">Evalúa el promedio académico del estudiante y su progreso
                                    en la carrera.</p>
                            </div>
                            <div style="background: var(--bg-tertiary); padding: 12px; border-radius: 8px;">
                                <p style="font-size: 13px; margin-bottom: 4px;"><strong>Rango de Calificación:</strong>
                                </p>
                                <p style="font-size: 13px; color: var(--text-secondary);">9.0-10.0: 25 puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">8.0-8.9: 20 puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">7.0-7.9: 15 puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Menos de 7.0: 0 puntos</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Criterio 2: Situación Socioeconómica</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 12px;">
                                <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Puntuación
                                    Máxima: 25 puntos</p>
                                <p style="line-height: 1.6;">Análisis de la situación económica y necesidad financiera
                                    del estudiante.</p>
                            </div>
                            <div style="background: var(--bg-tertiary); padding: 12px; border-radius: 8px;">
                                <p style="font-size: 13px; margin-bottom: 4px;"><strong>Rango de Calificación:</strong>
                                </p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Muy bajo (0-2 salarios
                                    mínimos): 25 puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Bajo (2-4 salarios mínimos):
                                    18 puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Medio (4-6 salarios mínimos):
                                    10 puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Alto (Más de 6): 0 puntos</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Criterio 3: Compromiso Institucional</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 12px;">
                                <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Puntuación
                                    Máxima: 20 puntos</p>
                                <p style="line-height: 1.6;">Participación en programas, actividades extracurriculares y
                                    compromiso con la institución.</p>
                            </div>
                            <div style="background: var(--bg-tertiary); padding: 12px; border-radius: 8px;">
                                <p style="font-size: 13px; margin-bottom: 4px;"><strong>Rango de Calificación:</strong>
                                </p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Participación activa: 20
                                    puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Participación moderada: 14
                                    puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Participación mínima: 8 puntos
                                </p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Sin participación: 0 puntos
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Criterio 4: Entrevista Personal</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 12px;">
                                <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Puntuación
                                    Máxima: 15 puntos</p>
                                <p style="line-height: 1.6;">Evaluación cualitativa de la entrevista personal con el
                                    estudiante.</p>
                            </div>
                            <div style="background: var(--bg-tertiary); padding: 12px; border-radius: 8px;">
                                <p style="font-size: 13px; margin-bottom: 4px;"><strong>Rango de Calificación:</strong>
                                </p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Excelente desempeño: 15 puntos
                                </p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Buen desempeño: 11 puntos</p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Desempeño aceptable: 7 puntos
                                </p>
                                <p style="font-size: 13px; color: var(--text-secondary);">Desempeño deficiente: 0 puntos
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Se han eliminado las vistas relacionadas al sistema de votación y al historial de decisiones -->

            <!-- Reuniones -->
            <div id="committee-reuniones-view" class="view">
                <div class="view-header">
                    <div style="display:flex; align-items:center; justify-content:space-between; width:100%;">
                        <div>
                            <h2>Reuniones del Comité</h2>
                        </div>
                        <div class="header-actions">
                            <button id="btnNuevaSesion" class="btn btn-primary" onclick="abrirDrawerNuevaSesion()">Nueva Sesión</button>
                        </div>
                    </div>
                </div>
                <!-- Historial de Sesiones (dinámico) -->
                <div class="card" style="margin-top:16px;">
                    <div class="card-header">
                        <h3>Historial de Sesiones</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Estado</th>
                                        <th>ID Sesión</th>
                                    </tr>
                                </thead>
                                <tbody id="comiteHistorialSesionBody">
                                    <tr><td colspan="3" class="text-muted">Cargando historial...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="reunionesCardsContainer" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; margin-bottom: 24px;">
                    <!-- Contenedor dinámico: las tarjetas de sesiones se renderizan desde JavaScript -->
                </div>
            </div>

            <!-- Reportes y Estadísticas -->
            <div id="committee-reportes-view" class="view">
                <div class="view-header">
                    <h2>Reportes y Estadísticas</h2>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Estadísticas del Cuatrimestre Actual</h3>
                        <select class="select-sm" id="reportQuarterFilter">
                            <option value="2024-1" selected>2024-1 (Ene-Abr)</option>
                            <option value="2024-2">2024-2 (May-Ago)</option>
                            <option value="2024-3">2024-3 (Sep-Dic)</option>
                        </select>
                    </div>
                    <div class="card-body">
                        <div class="grid-2">
                            <div style="text-align: center; padding: 20px;">
                                <p style="font-size: 32px; font-weight: 700; color: #3b82f6; margin-bottom: 8px;">156
                                </p>
                                <p style="font-size: 14px; color: var(--text-secondary);">Solicitudes Recibidas</p>
                            </div>
                            <div style="text-align: center; padding: 20px;">
                                <p style="font-size: 32px; font-weight: 700; color: #10b981; margin-bottom: 8px;">131
                                </p>
                                <p style="font-size: 14px; color: var(--text-secondary);">Aprobadas (84%)</p>
                            </div>
                            <div style="text-align: center; padding: 20px;">
                                <p style="font-size: 32px; font-weight: 700; color: #ef4444; margin-bottom: 8px;">25</p>
                                <p style="font-size: 14px; color: var(--text-secondary);">Rechazadas (16%)</p>
                            </div>
                            <div style="text-align: center; padding: 20px;">
                                <p style="font-size: 32px; font-weight: 700; color: #f59e0b; margin-bottom: 8px;">89%
                                </p>
                                <p style="font-size: 14px; color: var(--text-secondary);">Promedio Calificación</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Historial de Evaluaciones -->
            <div id="committee-historial-view" class="view">
                <div class="view-header">
                    <div>
                        <h2>Historial de Evaluaciones</h2>
                        <p class="text-muted">Registro completo de evaluaciones y decisiones por período académico</p>
                    </div>
                    <div class="header-actions">
                        <select class="select-sm" id="historyQuarterFilter">
                            <option value="all" selected>Todos los cuatrimestres</option>
                            <option value="2024-3">2024-3 (Sep-Dic)</option>
                            <option value="2024-2">2024-2 (May-Ago)</option>
                            <option value="2024-1">2024-1 (Ene-Abr)</option>
                            <option value="2023-3">2023-3 (Sep-Dic)</option>
                        </select>
                        <input type="search" id="historialSearch" placeholder="Buscar por solicitud o estudiante" class="select-sm" style="margin-left:8px; padding:6px 8px;" />
                        <button class="btn btn-primary" id="exportHistorialCsvBtn" style="margin-left:8px;">Exportar CSV</button>
                        <button class="btn btn-primary">Generar Reporte PDF</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Numero de Resolucione</th>
                                        <th>Numero Solicitud</th>
                                        <th>Sesion</th>
                                        <th>Decisión</th>
                                        <th>Motivo</th>
                                        <th>Fecha</th>
                                    </tr>
                                </thead>
                                <tbody id="historialDecisionesTableBody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Perfil del Miembro -->
            <div id="committee-perfil-view" class="view">
                <div class="view-header">
                    <h2>Mi Perfil</h2>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3>Información Personal</h3>
                        </div>
                        <div class="card-body">
                            <div style="text-align: center; margin-bottom: 24px;">

                                <p id="profileName" style="font-weight: 600; font-size: 18px; margin-bottom: 4px;">Dr. Francisco García López</p>
                                <p id="profileRole" style="color: var(--text-secondary);">Presidente del Comité de Becas</p>
                            </div>

                            <div style="border-top: 1px solid var(--border-color); padding-top: 16px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                    <span style="color: var(--text-secondary);">Email:</span>
                                    <span id="profileEmail" style="font-weight: 500;">comite@cuc.ac.cr</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: var(--text-secondary);">Departamento:</span>
                                    <span id="profileDepartment" style="font-weight: 500;">Asuntos Estudiantiles</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Estadísticas de Actividad</h3>
                        </div>
                        <div class="card-body">
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <div
                                    style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-tertiary); border-radius: 8px;">
                                    <span>Decisiones Registradas</span>
                                    <span style="font-weight: 700; color: #3b82f6;">156</span>
                                </div>
                                <div
                                    style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-tertiary); border-radius: 8px;">
                                    <span>Reuniones Asistidas</span>
                                    <span style="font-weight: 700; color: #10b981;">12/12</span>
                                </div>
                                <div
                                    style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-tertiary); border-radius: 8px;">
                                    <span>Tasa de Participación</span>
                                    <span style="font-weight: 700; color: #06b6d4;">100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Slide-in Drawer Nueva Sesion -->
    <div id="drawerNuevaSesion" style="position: fixed; right: -480px; top: 0; width: 460px; height: 100vh; background: linear-gradient(180deg, #0f1724, #111827); box-shadow: -2px 0 10px rgba(0,0,0,0.3); z-index: 9998; overflow-y: auto; transition: right 0.3s ease-out; padding: 30px 20px; box-sizing: border-box; border-left: 1px solid rgba(255,255,255,0.04);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin: 0; font-size: 1.5em; color: #e6eef8;">Nueva Sesión</h2>
            <button id="drawerClose" type="button" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #cbd5e1;">&times;</button>
        </div>
        <form id="formNuevaSesionDrawer" style="display:flex; flex-direction:column; gap:15px;">
            <div>
                <label for="fechaSesionDrawer" style="display:block; font-weight:bold; margin-bottom:8px; color:#9ca3af; font-size:13px;">Fecha</label>
                <input type="date" id="fechaSesionDrawer" name="fecha" required style="width:100%; padding:10px 12px; border:1px solid rgba(148,163,184,0.08); border-radius:4px; background:#0b1220; color:#e6eef8; font-size:14px;">
            </div>
            <div style="display:flex; gap:8px;">
                <div style="flex:1;">
                    <label for="horaSesionDrawer" style="display:block; font-weight:bold; margin-bottom:8px; color:#9ca3af; font-size:13px;">Hora</label>
                    <input type="time" id="horaSesionDrawer" name="hora" style="width:100%; padding:8px 10px; border:1px solid rgba(148,163,184,0.06); border-radius:4px; background:#0b1220; color:#e6eef8;">
                </div>
                <div style="flex:1;">
                    <label for="lugarSesionDrawer" style="display:block; font-weight:bold; margin-bottom:8px; color:#9ca3af; font-size:13px;">Lugar</label>
                    <input type="text" id="lugarSesionDrawer" name="lugar" placeholder="Sala / Enlace" style="width:100%; padding:8px 10px; border:1px solid rgba(148,163,184,0.06); border-radius:4px; background:#0b1220; color:#e6eef8;">
                </div>
            </div>
            <div>
                <label for="motivoSesionDrawer" style="display:block; font-weight:bold; margin-bottom:8px; color:#9ca3af; font-size:13px;">Motivo / Agenda</label>
                <textarea id="motivoSesionDrawer" name="motivo" rows="4" placeholder="Escriba motivo o agenda breve" style="width:100%; padding:8px 10px; border:1px solid rgba(148,163,184,0.06); border-radius:4px; background:#0b1220; color:#e6eef8; font-family: inherit;"></textarea>
            </div>
            <div style="display:flex; gap:10px; margin-top:10px;">
                <button id="drawerCancel" type="button" style="flex:1; padding: 9px 14px; background: transparent; border: 1px solid rgba(255,255,255,0.06); color: #cbd5e1; border-radius: 8px; cursor: pointer;">Cancelar</button>
                <button id="drawerSave" type="button" style="flex:1; padding: 9px 14px; background: linear-gradient(90deg,#3f7cff,#5cc1ff); border: none; color: #04203a; border-radius: 8px; font-weight: 600; cursor:pointer;">Guardar</button>
            </div>
        </form>
    </div>
    <!-- Drawer Overlay -->
    <div id="drawerOverlay" style="position: fixed; inset: 0; background: rgba(0,0,0,0); z-index: 9997; opacity: 0; transition: opacity 0.3s ease-out; pointer-events: none;"></div>

    <div class="modal" id="modalRevisionCaso" style="display:none; position:fixed; inset:0; align-items:center; justify-content:center; background: rgba(0,0,0,0.4);">
        <div class="modal-content" style="width:600px; padding:20px; max-height:80vh; overflow:auto;">
            <!-- El contenido será llenado por abrirModalRevision(id) -->
        </div>
    </div>

    <!-- Modal de detalle de sesión -->
    <div class="modal" id="modalDetalleSesion" style="display:none; position:fixed; inset:0; align-items:center; justify-content:center; background: rgba(0,0,0,0.45); z-index:10002;">
        <div class="modal-content" style="width:460px; padding:18px; max-height:80vh; overflow:auto; background:var(--bg-primary); color:var(--text-primary); border-radius:8px; position: relative; z-index: 10003;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
                <h3 id="detalleSesionTitulo" style="margin:0; font-size:16px;">Detalle de la Sesión</h3>
                <button aria-label="Cerrar" id="modalDetalleSesionClose" style="background:transparent; border:none; color: #cbd5e1; font-size:20px; cursor:pointer;">&times;</button>
            </div>
            <div id="detalleSesionBody">
                <!-- Contenido llenado por JS: fecha, hora, lugar, motivo, id, estado -->
                <p><strong>Fecha:</strong> <span id="detalle_fecha">-</span> <span id="detalle_hora"></span></p>
                <p><strong>Lugar:</strong> <span id="detalle_lugar">-</span></p>
                <p><strong>Motivo / Agenda:</strong></p>
                <div id="detalle_motivo" style="background:var(--bg-tertiary); padding:10px; border-radius:6px; color:var(--text-secondary);">(no especificado)</div>
                <p style="margin-top:12px;"><strong>ID Sesión:</strong> <span id="detalle_id">-</span> • <strong>Estado:</strong> <span id="detalle_estado">-</span></p>
            </div>
            <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:12px;">
                <button class="btn btn-danger" id="modalDetalleSesionDelete">Eliminar</button>
                <button class="btn btn-outline" id="modalDetalleSesionEdit">Editar</button>
                <button class="btn btn-secondary" id="modalDetalleSesionCloseBtn">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación (usado en lugar de alertas) -->
    <div class="modal" id="modalConfirm" style="display:none; position:fixed; inset:0; align-items:center; justify-content:center; background: rgba(0,0,0,0.45); z-index:10001;">
        <div class="modal-content" style="width:360px; padding:18px; text-align:center;">
            <h3 id="modalConfirmTitle" style="margin-top:0;">Confirmación</h3>
            <p id="modalConfirmMessage" style="color:var(--text-secondary); margin:16px 0;"></p>
            <div style="display:flex; gap:8px; justify-content:center;">
                <button class="btn btn-secondary" id="modalConfirmClose">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal Ver Resolución -->
    <div class="modal" id="modalVerResolucion" style="display:none; position:fixed; inset:0; align-items:center; justify-content:center; background: rgba(0,0,0,0.45); z-index:10003;">
        <div class="modal-content" style="width:700px; padding:18px; max-height:80vh; overflow:auto; background:var(--bg-primary); color:var(--text-primary); border-radius:8px;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                <h3 id="modalVerResolucionTitle" style="margin:0; font-size:18px;">Detalle de Resolución</h3>
                <button aria-label="Cerrar" id="modalVerResolucionClose" style="background:transparent; border:none; color: #cbd5e1; font-size:20px; cursor:pointer;">&times;</button>
            </div>
            <div id="modalVerResolucionBody" style="display:grid; gap:16px;">
                <!-- INFORMACIÓN DE SOLICITUD -->
                <div style="border-bottom: 1px solid var(--border-color); padding-bottom:12px;">
                    <h4 style="margin: 0 0 8px 0; font-size:14px; font-weight:600; color:var(--text-secondary);">INFORMACIÓN DE SOLICITUD</h4>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px; font-size:13px;">
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">ID Solicitud:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_id">-</span></p>
                        </div>
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Código:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_codigo">-</span></p>
                        </div>
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Estudiante:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_estudiante">-</span></p>
                        </div>
                    </div>
                </div>

                <!-- RESOLUCIÓN Y DECISIÓN -->
                <div style="border-bottom: 1px solid var(--border-color); padding-bottom:12px;">
                    <h4 style="margin: 0 0 8px 0; font-size:14px; font-weight:600; color:var(--text-secondary);">DECISIÓN DEL COMITÉ</h4>
                    <div style="display:grid; gap:8px; font-size:13px;">
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Decisión:</p>
                            <p style="margin:0;"><span id="resolucion_decision" style="font-weight:600; padding:4px 8px; border-radius:4px;"></span></p>
                        </div>
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Motivo / Observaciones Comité:</p>
                            <div id="resolucion_motivo" style="background:var(--bg-tertiary); padding:10px; border-radius:6px; color:var(--text-secondary); font-size:13px; min-height:40px;">(no especificado)</div>
                        </div>
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Fecha de Decisión:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_fecha">-</span></p>
                        </div>
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Fecha de Evaluación:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_fecha_evaluacion">-</span></p>
                        </div>
                    </div>
                </div>

                <!-- EVALUACIÓN ACADÉMICA -->
                <div style="border-bottom: 1px solid var(--border-color); padding-bottom:12px;">
                    <h4 style="margin: 0 0 8px 0; font-size:14px; font-weight:600; color:var(--text-secondary);">EVALUACIÓN ACADÉMICA</h4>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px; font-size:13px;">
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Método Socio:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_metodo_socio">-</span></p>
                        </div>
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Promedio:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_promedio">-</span></p>
                        </div>
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Materias Reprobadas:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_reprobadas">-</span></p>
                        </div>
                        <div>
                            <p style="margin:0 0 4px 0; color:var(--text-secondary);">Evaluado por:</p>
                            <p style="margin:0; font-weight:500;"><span id="resolucion_evaluado_por">-</span></p>
                        </div>
                    </div>
                </div>

                <!-- OBSERVACIONES DE EVALUACIÓN -->
                <div>
                    <h4 style="margin: 0 0 8px 0; font-size:14px; font-weight:600; color:var(--text-secondary);">OBSERVACIONES DE EVALUACIÓN</h4>
                    <div id="resolucion_observaciones" style="background:var(--bg-tertiary); padding:10px; border-radius:6px; color:var(--text-secondary); font-size:13px; min-height:50px; white-space:pre-wrap;">(no especificado)</div>
                </div>
            </div>
            <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:16px;">
                <button class="btn btn-secondary" id="modalVerResolucionCloseBtn">Cerrar</button>
            </div>
        </div>
    </div>

    <script src="comite_script.js"></script>
    <script src="theme-toggle.js"></script>
</body>

</html>