<!DOCTYPE html>
<html lang="es">
<head>
    <script src="config.js"></script>
  

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Becas - Panel Administrativo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1 class="logo">Sistema de Becas</h1>
        </div>
        <div class="header-center">
            <div class="search-bar">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM18 18l-4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <input type="text" placeholder="Buscar estudiantes, solicitudes... (Ctrl+K)">
            </div>
        </div>
        <div class="header-right">
            <button class="btn-icon" title="Notificaciones">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M15 6.5a5 5 0 1 0-10 0c0 5-2 7-2 7h14s-2-2-2-7zM11.5 17a1.5 1.5 0 0 1-3 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <span class="badge">3</span>
            </button>
            <div class="user-menu">
                <span class="user-name">Admin</span>
                <button class="btn btn-secondary btn-sm" onclick="cerrarSesion()" style="margin-left: 10px;">Cerrar Sesi√≥n</button>
            </div>
        </div>
    </header>

    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <nav class="nav">
                <div class="nav-section">
                    <span class="nav-section-title">Principal</span>
                    <a href="#" class="nav-item active" data-view="dashboard">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="11" y="3" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="3" y="11" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="11" y="11" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Dashboard</span>
                    </a>
                    
                    <!-- Agregados CMI y Asistente AI al nav principal -->
                    <div class="nav-item nav-submenu" data-view="cmi">
                        <div class="nav-item-header">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M3 5h14M3 10h14M3 15h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <span>CMI</span>
                            <svg class="submenu-toggle" width="16" height="16" viewBox="0 0 16 16" fill="none" style="margin-left: auto;">
                                <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="nav-submenu-items">
                            <!-- Panel is now the first item in CMI menu -->
                            <a href="#" class="nav-item nav-subitem" data-view="cmi-panel">
                                <span>Dashboard del Cuadro de Mando Integral (CMI)</span>
                            </a>
                            <a href="#" class="nav-item nav-subitem" data-view="cmi-perspectivas">
                                <span>Configuraci√≥n de Perspectivas</span>
                            </a>
                            <a href="#" class="nav-item nav-subitem" data-view="cmi-objetivos">
                                <span>Configuraci√≥n de Objetivos</span>
                            </a>
                            <a href="#" class="nav-item nav-subitem" data-view="cmi-indicadores">
                                <span>Configuraci√≥n de Indicadores</span>
                            </a>
                            <a href="#" class="nav-item nav-subitem" data-view="cmi-metas">
                                <span>Configuraci√≥n de Metas</span>
                            </a>
                            <a href="#" class="nav-item nav-subitem" data-view="cmi-acciones">
                                <span>Configuraci√≥n de Acciones</span>
                            </a>
                        </div>
                    </div>
                    
                    <a href="#" class="nav-item" data-view="asistente-ai">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M10 6v8M6 10h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Asistente AI</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">Gesti√≥n de Becas</span>
                    <a href="#" class="nav-item" data-view="convocatoria">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 3v14M3 10h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Convocatoria</span>
                    </a>
                    <a href="#" class="nav-item" data-view="solicitudes">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M6 2h8l4 4v11a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h3z" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Solicitudes</span>
                    </a>
                    <a href="#" class="nav-item" data-view="socioeconomico">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="7" r="3" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M3 17v-2a4 4 0 0 1 4-4h6a4 4 0 0 1 4 4v2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>An√°lisis Socioecon√≥mico</span>
                    </a>
                    <a href="#" class="nav-item" data-view="academico">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M2 7l8-4 8 4-8-4z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M2 12l8 4 8-4M2 17l8 4 8-4" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Evaluaci√≥n Acad√©mica</span>
                    </a>
                    <a href="#" class="nav-item" data-view="administrativo">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Revisi√≥n Administrativa</span>
                    </a>
                    <a href="#" class="nav-item" data-view="comite">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="7" cy="7" r="2" stroke="currentColor" stroke-width="1.5"/>
                            <circle cx="13" cy="7" r="2" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M3 15v-1a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1M12 15v-1a3 3 0 0 1 3-3h2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Comit√© de Becas</span>
                    </a>
                    <a href="#" class="nav-item" data-view="comunicacion">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M3 8l7-5 7 5v9a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V8z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 17v-6h6v6" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Comunicaci√≥n</span>
                    </a>
                    <a href="#" class="nav-item" data-view="formalizacion">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M14 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 10h6M7 14h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Formalizaci√≥n</span>
                    </a>
                    <a href="#" class="nav-item" data-view="seguimiento">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M10 6v4l3 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Seguimiento</span>
                    </a>
                    <a href="#" class="nav-item" data-view="renovacion">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M17 10a7 7 0 1 1-2-4.9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M17 4v6h-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Renovaci√≥n</span>
                    </a>
                    <a href="#" class="nav-item" data-view="archivo">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 4h12v3H4zM4 7v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V7" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 11h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Archivo</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">Sistema</span>
                    <a href="#" class="nav-item" data-view="reportes">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M6 14v3M10 11v6M14 8v8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Reportes</span>
                    </a>
                    <a href="#" class="nav-item" data-view="configuracion">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M10 1v2m0 14v2M3.93 3.93l1.41 1.41m9.9 9.9l1.41 1.41M1 10h2m14 0h2M3.93 16.07l1.41-1.41m9.9-9.9l1.41-1.41" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Configuraci√≥n</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view active">
                <div class="view-header">
                    <div>
                        <h2>Dashboard Administrativo</h2>
                        <p class="text-muted">Resumen general del sistema de becas</p>
                    </div>
                    <!-- Added quarter filter to dashboard -->
                    <div class="header-actions">
                        <select class="select-sm" id="dashboardQuarterFilter">
                            <option value="all">Todos los cuatrimestres</option>
                            <option value="2024-3">2024-3 (Sep-Dic)</option>
                            <option value="2024-2">2024-2 (May-Ago)</option>
                            <option value="2024-1" selected>2024-1 (Ene-Abr)</option>
                            <option value="2023-3">2023-3 (Sep-Dic)</option>
                            <option value="2023-2">2023-2 (May-Ago)</option>
                        </select>
                        <button class="btn btn-primary">Generar Reporte</button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Solicitudes Activas</div>
                            <div class="stat-value">156</div>
                            <div class="stat-change positive">+12% vs mes anterior</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2"/>
                                <path d="M2 17l10 5 10-5M2 12l10 5 10-5" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Becas Otorgadas</div>
                            <div class="stat-value">189</div>
                            <div class="stat-change positive">+8% vs mes anterior</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">En Evaluaci√≥n</div>
                            <div class="stat-value">58</div>
                            <div class="stat-change">Pendientes de revisi√≥n</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Presupuesto Asignado</div>
                            <div class="stat-value">$2.4M</div>
                            <div class="stat-change">68% del total disponible</div>
                        </div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3>Solicitudes por Estado</h3>
                            <select class="select-sm">
                                <option>√öltimo mes</option>
                                <option>√öltimo trimestre</option>
                                <option>√öltimo a√±o</option>
                            </select>
                        </div>
                        <div class="card-body">
                            <canvas id="statusChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Actividad Reciente</h3>
                        </div>
                        <div class="card-body">
                            <div class="activity-list">
                                <div class="activity-item">
                                    <div class="activity-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">‚úì</div>
                                    <div class="activity-content">
                                        <div class="activity-title">Beca aprobada</div>
                                        <div class="activity-description">Mar√≠a Gonz√°lez - Beca Acad√©mica 100%</div>
                                        <div class="activity-time">Hace 5 minutos</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">‚è±</div>
                                    <div class="activity-content">
                                        <div class="activity-title">Nueva solicitud</div>
                                        <div class="activity-description">Carlos Ram√≠rez - Beca Socioecon√≥mica</div>
                                        <div class="activity-time">Hace 15 minutos</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">üìÑ</div>
                                    <div class="activity-content">
                                        <div class="activity-title">Informe completado</div>
                                        <div class="activity-description">An√°lisis socioecon√≥mico - Ana Mart√≠nez</div>
                                        <div class="activity-time">Hace 1 hora</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">üë•</div>
                                    <div class="activity-content">
                                        <div class="activity-title">Sesi√≥n de comit√©</div>
                                        <div class="activity-description">Revisi√≥n de 12 casos pendientes</div>
                                        <div class="activity-time">Hace 2 horas</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Solicitudes Recientes</h3>
                        <button class="btn btn-secondary">Ver Todas</button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Estudiante</th>
                                        <th>Tipo de Beca</th>
                                        <th>Fecha</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#2024-156</td>
                                        <td>
                                            <div class="user-cell">
                                                <img src="/placeholder.svg?height=32&width=32" alt="Student" class="avatar-sm">
                                                <span>Mar√≠a Gonz√°lez</span>
                                            </div>
                                        </td>
                                        <td>Acad√©mica</td>
                                        <td>15 Ene 2024</td>
                                        <td><span class="badge badge-success">Aprobada</span></td>
                                        <td>
                                            <button class="btn-icon" title="Ver detalles">üëÅ</button>
                                            <button class="btn-icon" title="Editar">‚úèÔ∏è</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#2024-155</td>
                                        <td>
                                            <div class="user-cell">
                                                <img src="/placeholder.svg?height=32&width=32" alt="Student" class="avatar-sm">
                                                <span>Carlos Ram√≠rez</span>
                                            </div>
                                        </td>
                                        <td>Socioecon√≥mica</td>
                                        <td>15 Ene 2024</td>
                                        <td><span class="badge badge-warning">En Evaluaci√≥n</span></td>
                                        <td>
                                            <button class="btn-icon" title="Ver detalles">üëÅ</button>
                                            <button class="btn-icon" title="Editar">‚úèÔ∏è</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#2024-154</td>
                                        <td>
                                            <div class="user-cell">
                                                <img src="/placeholder.svg?height=32&width=32" alt="Student" class="avatar-sm">
                                                <span>Ana Mart√≠nez</span>
                                            </div>
                                        </td>
                                        <td>Deportiva</td>
                                        <td>14 Ene 2024</td>
                                        <td><span class="badge badge-info">Pendiente</span></td>
                                        <td>
                                            <button class="btn-icon" title="Ver detalles">üëÅ</button>
                                            <button class="btn-icon" title="Editar">‚úèÔ∏è</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
                        <!-- CMI Views -->
            <!-- Add Panel view as the main CMI view -->
            <div id="cmi-panel-view" class="view">
                <div class="view-header">
                    <div>
                        <h1>Cuadro de Mando Integral (CMI)</h1>
                        <p class="text-muted">Dashboard de an√°lisis estrat√©gico con trazabilidad de indicadores y metas</p>
                    </div>
                </div>

                <!-- Filtros mejorados para an√°lisis de periodos y perspectivas -->
                <div class="card">
                    <div class="card-body">
                        <div class="filters-bar" style="gap: 16px; align-items: flex-end;">
                            <div style="display: flex; align-items: center; gap: 8px; flex: 1; min-width: 250px;">
                                <label for="filtroPeriodo" style="font-weight: 500; color: var(--text-primary); white-space: nowrap;">Per√≠odo:</label>
                                <select id="filtroPeriodo" class="select-sm" style="flex: 1;">
                                    <option value="2025-1">2025 - Ciclo I</option>
                                    <option value="2025-2">2025 - Ciclo II</option>
                                    <option value="2024-3">2024 - Ciclo III</option>
                                    <option value="2024-2">2024 - Ciclo II</option>
                                    <option value="2024-1" selected>2024 - Ciclo I</option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px; flex: 1; min-width: 250px;">
                                <label for="filtroPerspectiva" style="font-weight: 500; color: var(--text-primary); white-space: nowrap;">Perspectiva:</label>
                                <select id="filtroPerspectiva" class="select-sm" style="flex: 1;">
                                    <option value="">Todas las perspectivas</option>
                                    <option value="1">Financiera (Uso de Recursos)</option>
                                    <option value="2">Cliente / Beneficiario</option>
                                    <option value="3">Procesos Internos</option>
                                    <option value="4">Aprendizaje y Crecimiento</option>
                                </select>
                            </div>
                            <button id="btnCargarDatos" class="btn btn-primary">Cargar Datos</button>
                            <button id="btnExportarReporte" class="btn btn-secondary">Exportar Reporte</button>
                        </div>
                    </div>
                </div>

                <!-- Resumen de estado general del CMI -->
                <div class="stats-grid" id="cmiStatsContainer">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Indicadores en Meta</div>
                            <div class="stat-value" id="indicadoresEnMeta">--</div>
                            <div class="stat-change" id="indicadoresEnMetaPercent">0%</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 9v2m0 4v2m0-10h.01M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Indicadores en Alerta</div>
                            <div class="stat-value" id="indicadoresEnAlerta">--</div>
                            <div class="stat-change" id="indicadoresEnAlertaPercent">0%</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 9v2m0 4v2m0-10h.01M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Indicadores Cr√≠ticos</div>
                            <div class="stat-value" id="indicadoresCriticos">--</div>
                            <div class="stat-change" id="indicadoresCriticosPercent">0%</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M9 19v-6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2zm0 0V9a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v10m-6 0a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2m0 0V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Total de Indicadores</div>
                            <div class="stat-value" id="totalIndicadores">--</div>
                            <div class="stat-change">Activos en el per√≠odo</div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard jer√°rquico del CMI con perspectivas, objetivos e indicadores -->
                <main id="dashboardCmi" class="dashboard-cmi">
                    <!-- Perspectivas se cargar√°n din√°micamente -->
                </main>

            </div>
            <div class="card announcements-card">
                    <div class="card-header">
                        <h3>Anuncios</h3>
                        <button class="btn btn-sm" id="btnCollapseAnnouncements" onclick="toggleAnnouncements()">Ocultar</button>
                    </div>
                    <div class="card-body">
                        <ul class="announcements-list" style="margin:0; padding-left:18px;">
                            <li><strong>Becas 2025:</strong> Apertura de Solicitudes ‚Äî Se informa que el proceso de solicitud de becas 2025 queda oficialmente cerrado hasta el proximo a√±p.</li>
                            <li><strong>Reuni√≥n del Comit√© de Becas:</strong> Se convoca a los miembros del comit√© a la sesi√≥n semanal para revisi√≥n de casos pendientes.</li>
                            <li><strong>Actualizaci√≥n de Plataforma:</strong> Se realiz√≥ una actualizaci√≥n para mejorar el rendimiento del sistema de solicitudes.</li>
                            <li><strong>Recordatorio de Documentos:</strong> Estudiantes deben subir sus documentos faltantes antes del cierre de evaluaciones.</li>
                            <li><strong>Sesi√≥n Extraordinaria del Comit√©:</strong> Se realizar√° una sesi√≥n extraordinaria para revisar solicitudes urgentes.</li>
                            <li><strong>Nuevos Beneficios para Becados:</strong> Se agregaron beneficios adicionales para estudiantes becados durante el 2025.</li>
                            <li><strong>Mantenimiento Programado:</strong> La plataforma estar√° fuera de servicio el 14 de febrero por mantenimiento t√©cnico.</li>
                        </ul>
                    </div>
                </div>

                <script>
                function toggleAnnouncements() {
                    const body = document.querySelector('.announcements-card .card-body');
                    const btn = document.getElementById('btnCollapseAnnouncements');
                    if (!body || !btn) return;
                    if (body.style.display === 'none') {
                        body.style.display = '';
                        btn.textContent = 'Ocultar';
                    } else {
                        body.style.display = 'none';
                        btn.textContent = 'Mostrar';
                    }
                }
                </script>
      <!-- ===========================
     CONVOCATORIA VIEW COMPLETA
=========================== -->
<div id="convocatoria-view" class="view">

    <!-- HEADER -->
    <div class="view-header">
        <div>
            <h2>Convocatoria y Difusi√≥n</h2>
            <p class="text-muted">Gesti√≥n de convocatorias de becas</p>
        </div>

        <div style="display:flex; gap:10px;">
            <button class="btn btn-primary" id="btnNuevaConvocatoria">
                Nueva Convocatoria
            </button>

            <button class="btn btn-secondary" id="btnNuevaSolicitud">
                Nueva Solicitud
            </button>
        </div>
    </div>

    <!-- ===========================
         CONVOCATORIAS ACTIVAS
    ============================ -->
    <div class="card">
        <div class="card-header">
            <h3>Convocatorias</h3>
            <p class="text-muted">
                Seleccione la convocatoria activa. Esto afectar√° solicitudes, etapas y periodos.
            </p>
        </div>

        <div class="card-body">
            <div class="convocatoria-grid" id="convocatoriaGrid"></div>
        </div>
    </div>

    <!-- ===========================
         SOLICITUDES
    ============================ -->
    <div class="card">
        <div class="card-header">
            <h3>Solicitudes</h3>
        </div>

        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Estudiante</th>
                            <th>Tipo Beca</th>
                            <th>Fecha</th>
                            <th>Estado</th>
                            <th>Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody id="solicitudesTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- ===========================
         CRONOGRAMA
    ============================ -->
    <div class="card">
        <div class="card-header">
            <h3 id="cronogramaConvocatoriaHeader">Cronograma</h3>
        </div>

        <div class="card-body">
            <div class="timeline" id="cronogramaTimeline"></div>
        </div>
    </div>

    <!-- ===========================
         ACTIVACI√ìN DE PERIODOS
    ============================ -->
    <div class="card">
        <div class="card-header">
            <h3>Activaci√≥n de Periodos</h3>
        </div>

        <div class="card-body">
            <button class="btn btn-primary" id="btnNuevoPeriodo">+ Nuevo Periodo</button>

            <div class="table-responsive" style="margin-top:15px;">
                <table class="table">
                    <thead>
                        <tr>
                            <th>A√±o</th>
                            <th>Ciclo</th>
                            <th>Inicio</th>
                            <th>Fin</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="periodosTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- ===========================
         ACTIVACI√ìN / CIERRE DE ETAPAS
    ============================ -->
    <div class="card">
        <div class="card-header">
            <h3>Activaci√≥n / Cierre de Etapas</h3>
        </div>

        <div class="card-body">
            <p class="text-muted">Controle la etapa actual de la convocatoria activa.</p>

            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Etapa</th>
                            <th>Descripci√≥n</th>
                            <th>Estado</th>
                            <th>Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody id="etapasTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

</div> <!-- FIN DE LA VISTA PRINCIPAL -->


<!-- ===========================
     MODAL NUEVA CONVOCATORIA
=========================== -->
<div id="modalConvocatoria" class="modal" style="display:none;">
    <div class="modal-content">
        <h3>Nueva Convocatoria</h3>

        <form id="formConvocatoria">

            <label>Nombre:</label>
            <input type="text" id="convNombre" required>

            <label>Fecha Inicio:</label>
            <input type="date" id="convInicio" required>

            <label>Fecha Cierre:</label>
            <input type="date" id="convCierre" required>

            <div class="modal-buttons" style="margin-top:15px;">
                <button type="submit" class="btn btn-primary">Guardar</button>
                <button type="button" id="cerrarModalConvocatoria" class="btn btn-secondary">Cancelar</button>
            </div>

        </form>
    </div>
</div>

<!-- ===========================
     MODAL NUEVO PERIODO
=========================== -->
<div id="modalPeriodo" class="modal" style="display:none;">
    <div class="modal-content">
        <h2 id="modalPeriodoTitulo">Nuevo Periodo</h2>

        <form id="formPeriodo">
            <input type="hidden" id="periodoId">

            <label>A√±o:</label>
            <input type="number" id="periodoAnio" class="input" required>

            <label>Ciclo:</label>
            <input type="text" id="periodoCiclo" class="input" required>

            <label>Fecha Inicio:</label>
            <input type="date" id="periodoInicio" class="input" required>

            <label>Fecha Fin:</label>
            <input type="date" id="periodoFin" class="input" required>

            <div class="modal-buttons">
                <button class="btn btn-primary" type="submit">Guardar</button>
                <button class="btn btn-secondary" id="cerrarModalPeriodo" type="button">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<!-- ===========================
     MODAL CAMBIAR ESTADO ETAPA
=========================== -->
<div id="modalEtapa" class="modal" style="display:none;">
    <div class="modal-content">
        <h2 id="modalEtapaTitulo">Cambiar Estado de Etapa</h2>

        <form id="formEtapa">
            <input type="hidden" id="etapaId">
            <input type="hidden" id="etapaConvocatoriaId">

            <label>Etapa:</label>
            <input type="text" id="etapaNombre" class="input" disabled>

            <label>Estado:</label>
            <select id="etapaEstado" class="input">
                <option value="ABIERTA">ABIERTA</option>
                <option value="CERRADA">CERRADA</option>
                <option value="PENDIENTE">PENDIENTE</option>
            </select>

            <div class="modal-buttons">
                <button type="submit" class="btn btn-primary">Actualizar</button>
                <button type="button" id="cerrarModalEtapa" class="btn btn-secondary">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<!-- ===========================
     MODAL NUEVA SOLICITUD
=========================== -->
<div id="modalSolicitud" class="modal" style="display:none;">
    <div class="modal-content">
        <h3>Nueva Solicitud</h3>

        <form id="formSolicitud">

            <label>ID Estudiante</label>
            <input type="number" id="solicitudEstudiante" required>

            <label>ID Tipo de Beca</label>
            <input type="number" id="solicitudTipoBeca" required>

            <label>Estado</label>
            <select id="solicitudEstado">
                <option value="PENDIENTE">PENDIENTE</option>
                <option value="EN_REVISION">EN_REVISION</option>
                <option value="APROBADA">APROBADA</option>
                <option value="RECHAZADA">RECHAZADA</option>
            </select>

            <div class="modal-buttons" style="margin-top:15px;">
                <button type="submit" class="btn btn-primary">Guardar</button>
                <button type="button" id="cerrarModalSolicitud" class="btn btn-secondary">Cancelar</button>
            </div>

        </form>
    </div>
</div>

<!-- ===========================
     APELACIONES
=========================== -->
<div class="card">
    <div class="card-header">
        <h3>Apelaciones</h3>
    </div>

    <div class="card-body">
        <p class="text-muted">Gesti√≥n de apelaciones enviadas por estudiantes.</p>

        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>ID Apelaci√≥n</th>
                        <th>ID Solicitud</th>
                        <th>Motivo</th>
                        <th>Fecha</th>
                        <th>Estado</th>
                        <th>Acci√≥n</th>
                    </tr>
                </thead>
                <tbody id="apelacionesTableBody"></tbody>
            </table>
        </div>
    </div>
</div>

<!-- ============================================================
     AN√ÅLISIS SOCIOECON√ìMICO VIEW  (CORRECTA Y COMPLETA)
=============================================================== -->
<div id="socioeconomico-view" class="view">

    <div class="view-header">
        <div>
            <h2>An√°lisis Socioecon√≥mico</h2>
            <p class="text-muted">Evaluaci√≥n de la situaci√≥n socioecon√≥mica de los solicitantes</p>
        </div>
        <button class="btn btn-primary">Nuevo Informe</button>
    </div>

    <!-- CASOS PENDIENTES -->
    <div class="card">
        <div class="card-header">
            <h3>Casos Pendientes de An√°lisis</h3>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Estudiante</th>
                            <th>Fecha Solicitud</th>
                            <th>Trabajador Social</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <!-- üëâ Aqu√≠ JS insertar√° filas din√°micas -->
                    <tbody id="socioeconomicoTableBody"></tbody>

                </table>
            </div>
        </div>
    </div>

    <!-- HERRAMIENTAS DE EVALUACI√ìN -->
    <div class="card">
        <div class="card-header">
            <h3>Herramientas de Evaluaci√≥n</h3>
        </div>
        <div class="card-body">
            <div class="tools-grid">

                <div class="tool-card">
                    <h4>Encuesta Socioecon√≥mica</h4>
                    <p>Formulario estandarizado para recolecci√≥n de datos</p>
                    <button class="btn btn-secondary btn-sm">Aplicar</button>
                </div>

                <!-- =======================
                     VISITA DOMICILIARIA BOT√ìN
                ======================== -->
                <div class="tool-card">
                    <h4>Visita Domiciliaria</h4>
                    <p>Programar y registrar visitas al hogar del estudiante</p>

                    <button class="btn btn-secondary btn-sm nav-item" data-view="visita-domiciliaria">
                        Programar
                    </button>
                </div>

                <div class="tool-card">
                    <h4>C√°lculo de Nivel Socioecon√≥mico</h4>
                    <p>Herramienta autom√°tica de c√°lculo basada en datos</p>
                    <button class="btn btn-secondary btn-sm">Calcular</button>
                </div>

                <div class="tool-card">
                    <h4>Generador de Informes</h4>
                    <p>Crear informe socioecon√≥mico completo</p>
                    <button class="btn btn-secondary btn-sm">Generar</button>
                </div>

            </div>
        </div>
    </div>

</div> <!-- üî• AQU√ç TERMINA socioeconomico-view, ANTES NO LO CERRABAS -->


<!-- ============================================================
     VISITA DOMICILIARIA VIEW  (FUERA DE SOCIOECON√ìMICO)
=============================================================== -->
<div id="visita-domiciliaria-view" class="view">

    <div class="view-header">
        <div>
            <h2>Visita Domiciliaria</h2>
            <p class="text-muted">Programaci√≥n y registro de visitas al hogar</p>
        </div>

        <!-- BOT√ìN DE VOLVER -->
        <button class="btn btn-secondary nav-item" data-view="socioeconomico">
            Volver
        </button>
    </div>

    <!-- FORMULARIO -->
    <div class="card">
        <div class="card-header">
            <h3>Registrar Visita</h3>
        </div>

        <div class="card-body">
            <form id="formVisita">

                <div class="grid-2">
                    <div class="form-group">
                        <label>ID Solicitud</label>
                        <input type="number" id="id_solicitud" required placeholder="Ej: 125">
                    </div>

                    <div class="form-group">
                        <label>Fecha programada</label>
                        <input type="date" id="fecha_programada" required>
                    </div>

                    <div class="form-group">
                        <label>Fecha realizada</label>
                        <input type="date" id="fecha_realizada">
                    </div>

                    <div class="form-group">
                        <label>Estado</label>
                        <select id="estado">
                            <option value="PROGRAMADA">PROGRAMADA</option>
                            <option value="REALIZADA">REALIZADA</option>
                            <option value="CANCELADA">CANCELADA</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Observaciones</label>
                    <textarea id="observaciones" rows="3" placeholder="Notas importantes del hogar"></textarea>
                </div>

                <div class="form-group">
                    <label>Resultado</label>
                    <textarea id="resultado" rows="2" placeholder="Resultado de la visita"></textarea>
                </div>

                <button type="submit" class="btn btn-primary">
                    Guardar Visita
                </button>
            </form>
        </div>
    </div>

    <!-- TABLA -->
    <div class="card">
        <div class="card-header">
            <h3>Historial de Visitas</h3>
        </div>

        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID Visita</th>
                            <th>ID Solicitud</th>
                            <th>Programada</th>
                            <th>Realizada</th>
                            <th>Estado</th>
                            <th>Resultado</th>
                            <th>Observaciones</th>
                        </tr>
                    </thead>
                    <tbody id="tablaVisitas"></tbody>
                </table>
            </div>
        </div>
    </div>

</div>


<!-- Evaluaci√≥n Acad√©mica View -->
<div id="academico-view" class="view">
    <div class="view-header">
        <div>
            <h2>Evaluaci√≥n Acad√©mica</h2>
            <p class="text-muted">Validaci√≥n del desempe√±o acad√©mico</p>
        </div>
        <!-- Filtro por cuatrimestre -->
        <select class="select-sm" id="academicQuarterFilter">
            <option value="all">Todos los cuatrimestres</option>
            <option value="2024-3">2024-3 (Sep-Dic)</option>
            <option value="2024-2">2024-2 (May-Ago)</option>
            <option value="2024-1" selected>2024-1 (Ene-Abr)</option>
            <option value="2023-3">2023-3 (Sep-Dic)</option>
            <option value="2023-2">2023-2 (May-Ago)</option>
        </select>
    </div>

    <div class="card">
        <div class="card-header">
            <h3>Estudiantes en Evaluaci√≥n</h3>
            <!-- Bot√≥n para ver comparaci√≥n -->
            <div class="filters-inline">
                <button class="btn btn-secondary btn-sm" id="compareQuartersBtn">
                    Comparar Cuatrimestres
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Estudiante</th>
                            <th>Cuatrimestre</th>
                            <th>Promedio</th>
                            <th>Cr√©ditos</th>
                            <th>Materias Aprobadas</th>
                            <th>Sanciones</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <!-- Aqu√≠ se insertan filas din√°micas desde JS -->
                    <tbody id="academicoTableBody"></tbody>

                </table>
            </div>
        </div>
    </div>

    <!-- Modal de comparaci√≥n de cuatrimestres -->
    <div id="quarterComparisonModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3>Comparaci√≥n de Desempe√±o por Cuatrimestre</h3>
                <button class="modal-close"
                    onclick="document.getElementById('quarterComparisonModal').style.display='none'">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <div class="comparison-filters">
                    <select class="select-sm" id="comparisonStudentSelect">
                        <option>Mar√≠a Gonz√°lez</option>
                        <option>Carlos Ram√≠rez</option>
                    </select>
                    <button class="btn btn-primary btn-sm">Comparar</button>
                </div>
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <h4>2024-1 (Ene-Abr)</h4>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <span class="label">Promedio:</span>
                                <span class="value badge badge-success">9.2</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Cr√©ditos:</span>
                                <span class="value">18</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Aprobadas:</span>
                                <span class="value">6/6</span>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card">
                        <h4>2023-3 (Sep-Dic)</h4>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <span class="label">Promedio:</span>
                                <span class="value badge badge-success">9.0</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Cr√©ditos:</span>
                                <span class="value">18</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Aprobadas:</span>
                                <span class="value">6/6</span>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card">
                        <h4>2023-2 (May-Ago)</h4>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <span class="label">Promedio:</span>
                                <span class="value badge badge-success">8.8</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Cr√©ditos:</span>
                                <span class="value">15</span>
                            </div>
                            <div class="stat-item">
                                <span class="label">Aprobadas:</span>
                                <span class="value">5/5</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="trend-analysis">
                    <h4>An√°lisis de Tendencia</h4>
                    <p class="trend-positive">
                        üìà Tendencia positiva: El promedio ha mejorado consistentemente en los √∫ltimos 3 cuatrimestres
                        (+0.4 puntos)
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Requisitos Acad√©micos -->
    <div class="card">
        <div class="card-header">
            <h3>Requisitos Acad√©micos</h3>
        </div>
        <div class="card-body">
            <div class="requirements-list">
                <div class="requirement-item">
                    <div class="requirement-icon">‚úì</div>
                    <div class="requirement-content">
                        <h4>Promedio M√≠nimo</h4>
                        <p>8.0 para becas acad√©micas, 7.5 para socioecon√≥micas</p>
                    </div>
                </div>
                <div class="requirement-item">
                    <div class="requirement-icon">‚úì</div>
                    <div class="requirement-content">
                        <h4>Carga Acad√©mica</h4>
                        <p>M√≠nimo 12 cr√©ditos por semestre</p>
                    </div>
                </div>
                <div class="requirement-item">
                    <div class="requirement-icon">‚úì</div>
                    <div class="requirement-content">
                        <h4>Materias Aprobadas</h4>
                        <p>Al menos 80% de materias cursadas</p>
                    </div>
                </div>
                <div class="requirement-item">
                    <div class="requirement-icon">‚úì</div>
                    <div class="requirement-content">
                        <h4>Sin Sanciones</h4>
                        <p>No tener sanciones disciplinarias activas</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



            <!-- Comit√© de Becas View -->
<div id="comite-view" class="view">

    <div class="view-header">
        <div>
            <h2>Comit√© de Becas</h2>
            <p class="text-muted">Sesiones y resoluciones del comit√©</p>
        </div>

        <button class="btn btn-primary" onclick="abrirModalSesion()">Nueva Sesi√≥n</button>
    </div>

    <!-- PR√ìXIMA SESI√ìN -->
    <div class="card">
        <div class="card-header">
            <h3>Pr√≥xima Sesi√≥n</h3>
        </div>
        <div class="card-body">
            <div id="proximaSesionContainer">
                <!-- üî• DATOS QUEMADOS -->
                <p><strong>Fecha:</strong> 2025-06-15 14:00:00</p>
                <p><strong>Estado:</strong> ABIERTA</p>
                <p><strong>ID Sesi√≥n:</strong> 10</p>
            </div>
        </div>
    </div>

 <!-- Modal Crear Sesi√≥n -->
<div class="modal" id="modalNuevaSesion" style="display:none;">
    <div class="modal-content">
        <h3>Programar Nueva Sesi√≥n del Comit√©</h3>

        <label>Fecha de la sesi√≥n:</label>
        <input type="date" id="fechaSesion" class="form-control">

        <label>Hora:</label>
        <input type="time" id="horaSesion" class="form-control">

        <label>Lugar de reuni√≥n:</label>
        <input type="text" id="lugarSesion" class="form-control" placeholder="Ej. Sala 3 / Edificio A">

        <br>

        <button class="btn btn-success" onclick="guardarSesionSimulada()">Guardar</button>

        <button class="btn btn-danger" onclick="cerrarModalSesion()">Cancelar</button>
    </div>
</div>

    <!-- CASOS PARA REVISI√ìN -->
    <div class="card">
        <div class="card-header">
            <h3>Casos para Revisi√≥n</h3>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Caso</th>
                            <th>Estudiante</th>
                            <th>Tipo</th>
                            <th>Informe Socioecon√≥mico</th>
                            <th>Evaluaci√≥n Acad√©mica</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="comiteCasosTableBody">
                        <!-- üî• DATOS QUEMADOS -->
                        <tr>
                            <td>#1</td>
                            <td>Estudiante 1</td>
                            <td>N/A</td>
                            <td>85</td>
                            <td>95</td>
                            <td><button class="btn btn-primary btn-sm" onclick="abrirModalRevision()">Revisar</button></td>

                        </tr>
                        <tr>
                            <td>#2</td>
                            <td>Estudiante 2</td>
                            <td>N/A</td>
                            <td>80</td>
                            <td>88</td>

                        <td><button class="btn btn-primary btn-sm" onclick="abrirModalRevision()">Revisar</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- MODAL DE REVISI√ìN QUEMADO -->
<div class="modal" id="modalRevisionCaso" style="display:none;">
    <div class="modal-content">
        <h3>Detalle del Caso</h3>

        <p><strong>Estudiante:</strong> Estudiante 1</p>
        <p><strong>C√≥digo solicitud:</strong> SOL-00001</p>
        <p><strong>Estado:</strong> EN_EVALUACION</p>
        <p><strong>Nota socioecon√≥mica:</strong> 85</p>
        <p><strong>Nota acad√©mica:</strong> 95</p>
        <p><strong>Total:</strong> 90</p>

        <br>

        <button onclick="cerrarModalRevision()" class="btn btn-danger">Cerrar</button>
    </div>
</div>

    </div>

    <!-- HISTORIAL DE SESIONES -->
    <div class="card">
        <div class="card-header">
            <h3>Historial de Sesiones</h3>
        </div>
        <div class="card-body">
            <table class="table">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Estado</th>
                        <th>ID Sesi√≥n</th>
                    </tr>
                </thead>
                <tbody id="comiteHistorialSesionBody">
                    <!-- üî• DATOS QUEMADOS -->
                    <tr>
                        <td>2025-06-18 09:30:00</td>
                        <td>CERRADA</td>
                        <td>11</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>



            <!-- Seguimiento View -->
<div id="seguimiento-view" class="view">
    <div class="view-header">
        <div>
            <h2>Seguimiento y Control</h2>
            <p class="text-muted">Monitoreo de becados activos</p>
        </div>
        <!-- Filtro de cuatrimestre -->
        <select class="select-sm" id="monitoringQuarterFilter">
            <option value="current">Cuatrimestre actual</option>
            <option value="2024-3">2024-3 (Sep-Dic)</option>
            <option value="2024-2">2024-2 (May-Ago)</option>
            <option value="2024-1">2024-1 (Ene-Abr)</option>
            <option value="2023-3">2023-3 (Sep-Dic)</option>
            <option value="all">Hist√≥rico completo</option>
        </select>
    </div>

    <!-- Estad√≠sticas del cuatrimestre (din√°micas) -->
    <div class="card">
        <div class="card-header">
            <h3>
                Estad√≠sticas del Cuatrimestre
                <span id="seguimientoQuarterLabel" class="text-muted" style="font-weight: normal; font-size: 0.9rem;">
                    <!-- JS pondr√° algo como: (2024-1) -->
                </span>
            </h3>
        </div>
        <div class="card-body">
            <div class="quarter-stats-grid">
                <div class="quarter-stat">
                    <div class="stat-label">Promedio General</div>
                    <div class="stat-value" id="seguimientoPromedioGeneral">-</div>
                    <div class="stat-change" id="seguimientoPromedioChange">-</div>
                </div>
                <div class="quarter-stat">
                    <div class="stat-label">Tasa de Aprobaci√≥n</div>
                    <div class="stat-value" id="seguimientoTasaAprobacion">-</div>
                    <div class="stat-change" id="seguimientoTasaAprobacionChange">-</div>
                </div>
                <div class="quarter-stat">
                    <div class="stat-label">Deserci√≥n</div>
                    <div class="stat-value" id="seguimientoDesercion">-</div>
                    <div class="stat-change" id="seguimientoDesercionChange">-</div>
                </div>
                <div class="quarter-stat">
                    <div class="stat-label">Becas Suspendidas</div>
                    <div class="stat-value" id="seguimientoSuspendidas">-</div>
                    <div class="stat-change" id="seguimientoSuspendidasPorcentaje">-</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Resumen r√°pido (din√°mico) -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Becados Activos</div>
                <div class="stat-value" id="seguimientoBecadosActivos">-</div>
                <div class="stat-change" id="seguimientoBecadosActivosComentario">-</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 9v4m0 4h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">En Riesgo</div>
                <div class="stat-value" id="seguimientoEnRiesgo">-</div>
                <div class="stat-change" id="seguimientoEnRiesgoComentario">-</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Suspendidos</div>
                <div class="stat-value" id="seguimientoSuspendidosResumen">-</div>
                <div class="stat-change" id="seguimientoSuspendidosComentario">-</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Desembolsado</div>
                <div class="stat-value" id="seguimientoMontoDesembolsado">-</div>
                <div class="stat-change" id="seguimientoMontoDesembolsadoComentario">-</div>
            </div>
        </div>
    </div>

    <!-- Alertas de seguimiento (din√°micas) -->
    <div class="card">
        <div class="card-header">
            <h3>Alertas de Seguimiento</h3>
        </div>
        <div class="card-body">
            <div class="alerts-list" id="seguimientoAlertasList">
                <!-- JS insertar√° .alert-item aqu√≠ -->
            </div>
        </div>
    </div>

    <!-- Tabla de becados activos (din√°mica) -->
    <div class="card">
        <div class="card-header">
            <h3>Becados Activos</h3>
            <div class="filters-inline">
                <select class="select-sm" id="seguimientoFiltroEstado">
                    <option value="todos">Todos</option>
                    <option value="riesgo">En riesgo</option>
                    <option value="cumpliendo">Cumpliendo</option>
                </select>
                <!-- Bot√≥n ya exist√≠a -->
                <button class="btn btn-secondary btn-sm" id="viewQuarterHistoryBtn">
                    Ver Historial por Cuatrimestre
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Estudiante</th>
                            <th>Tipo Beca</th>
                            <th>Cuatrimestre</th>
                            <th>Promedio Actual</th>
                            <th>Asistencia</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <!-- Aqu√≠ JS va a meter las filas -->
                    <tbody id="seguimientoBecadosTableBody"></tbody>

                </table>
            </div>
        </div>
    </div>
</div>

           <!-- Renovaciones View -->
<div id="renovaciones-view" class="view">
    <div class="view-header">
        <div>
            <h2>Renovaci√≥n de Becas</h2>
            <p class="text-muted">Gesti√≥n de solicitudes de renovaci√≥n y an√°lisis de desempe√±o</p>
        </div>
        <!-- Filtros simples arriba si luego quieres -->
        <select class="select-sm" id="renovacionesQuarterFilter">
            <option value="current">Cuatrimestre actual</option>
            <option value="2024-3">2024-3 (Sep-Dic)</option>
            <option value="2024-2">2024-2 (May-Ago)</option>
            <option value="2024-1">2024-1 (Ene-Abr)</option>
            <option value="2023-3">2023-3 (Sep-Dic)</option>
            <option value="all">Hist√≥rico completo</option>
        </select>
    </div>

    <div class="card">
        <div class="card-header">
            <h3>Solicitudes de Renovaci√≥n</h3>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Estudiante</th>
                            <th>Beca Actual</th>
                            <!-- Columnas de desempe√±o por cuatrimestre -->
                            <th>Cuatrimestre Anterior</th>
                            <th>Promedio Actual</th>
                            <th>Tendencia</th>
                            <th>Situaci√≥n Socioecon√≥mica</th>
                            <th>Recomendaci√≥n</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <!-- Aqu√≠ el JS va a inyectar las filas de renovaciones -->
                    <tbody id="renovacionesTableBody">
                        <!--
        

    <!-- An√°lisis de desempe√±o por cuatrimestre -->
    <div class="card">
        <div class="card-header">
            <h3>An√°lisis de Desempe√±o por Cuatrimestre</h3>
        </div>
        <div class="card-body">
            <div class="performance-chart">
                <!-- Canvas que usar√°s desde JS (Chart.js o lo que sea) -->
                <canvas id="quarterPerformanceChart" width="800" height="300"></canvas>
            </div>
        </div>
    </div>
</div>

            <!-- Reportes View -->
<div id="reportes-view" class="view">
    <div class="view-header">
        <div>
            <h2>Reportes y Estad√≠sticas</h2>
            <p class="text-muted">An√°lisis y reportes del sistema</p>
        </div>
        <!-- Filtro de cuatrimestre para reportes -->
        <div class="header-actions">
            <select class="select-sm" id="reportsQuarterFilter">
                <option value="all">Todos los cuatrimestres</option>
                <option value="2024-1">2024-1 (Ene-Abr)</option>
                <option value="2023-3">2023-3 (Sep-Dic)</option>
                <option value="2023-2">2023-2 (May-Ago)</option>
                <option value="compare">Comparar cuatrimestres</option>
            </select>
            <button class="btn btn-primary" id="btnGenerateGlobalReport">
                Generar Reporte
            </button>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3>Reportes Disponibles</h3>
        </div>
        <div class="card-body">
            <div class="reports-grid">
                <!-- Reporte de Becas Otorgadas -->
                <div class="report-card">
                    <div class="report-icon">üìä</div>
                    <h4>Reporte de Becas Otorgadas</h4>
                    <p>N√∫mero y tipos de becas por cuatrimestre</p>
                    <select class="select-sm report-scope-select" data-report-type="becas_otorgadas" style="margin: 10px 0;">
                        <option value="current">Cuatrimestre actual</option>
                        <option value="year">√öltimo a√±o</option>
                        <option value="compare">Comparativo</option>
                    </select>
                    <button
                        class="btn btn-secondary btn-sm btn-generate-report"
                        data-report-type="becas_otorgadas">
                        Generar
                    </button>
                </div>

                <!-- Reporte Financiero -->
                <div class="report-card">
                    <div class="report-icon">üí∞</div>
                    <h4>Reporte Financiero</h4>
                    <p>Montos desembolsados por cuatrimestre</p>
                    <select class="select-sm report-scope-select" data-report-type="financiero" style="margin: 10px 0;">
                        <option value="current">Cuatrimestre actual</option>
                        <option value="year">√öltimo a√±o</option>
                        <option value="compare">Comparativo</option>
                    </select>
                    <button
                        class="btn btn-secondary btn-sm btn-generate-report"
                        data-report-type="financiero">
                        Generar
                    </button>
                </div>

                <!-- Perfil Socioecon√≥mico -->
                <div class="report-card">
                    <div class="report-icon">üë•</div>
                    <h4>Perfil Socioecon√≥mico</h4>
                    <p>An√°lisis de perfiles por cuatrimestre</p>
                    <select class="select-sm report-scope-select" data-report-type="perfil_socioeconomico" style="margin: 10px 0;">
                        <option value="current">Cuatrimestre actual</option>
                        <option value="year">√öltimo a√±o</option>
                        <option value="compare">Comparativo</option>
                    </select>
                    <button
                        class="btn btn-secondary btn-sm btn-generate-report"
                        data-report-type="perfil_socioeconomico">
                        Generar
                    </button>
                </div>

                <!-- Desempe√±o Acad√©mico -->
                <div class="report-card">
                    <div class="report-icon">üìà</div>
                    <h4>Desempe√±o Acad√©mico</h4>
                    <p>Promedios y rendimiento por cuatrimestre</p>
                    <select class="select-sm report-scope-select" data-report-type="desempeno_academico" style="margin: 10px 0;">
                        <option value="current">Cuatrimestre actual</option>
                        <option value="year">√öltimo a√±o</option>
                        <option value="compare">Comparativo</option>
                    </select>
                    <button
                        class="btn btn-secondary btn-sm btn-generate-report"
                        data-report-type="desempeno_academico">
                        Generar
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Revisi√≥n Administrativa View -->
<div id="administrativo-view" class="view">
    <div class="view-header">
        <div>
            <h2>Revisi√≥n Administrativa</h2>
            <p class="text-muted">Validaci√≥n de requisitos administrativos</p>
        </div>
        <button class="btn btn-primary" id="btnGenerarReporteRevision">
            Generar Reporte de Revisi√≥n
        </button>
    </div>

    <!-- Tarjetas de resumen administrativo (cargadas desde el back) -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Expedientes Completos</div>
                <div class="stat-value" id="expedientesCompletosCount">0</div>
                <div class="stat-change positive" id="expedientesCompletosPercent">0% del total</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 9v4m0 4h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Documentaci√≥n Pendiente</div>
                <div class="stat-value" id="documentacionPendienteCount">0</div>
                <div class="stat-change" id="documentacionPendienteDetail">Requieren seguimiento</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Becas Incompatibles</div>
                <div class="stat-value" id="becasIncompatiblesCount">0</div>
                <div class="stat-change" id="becasIncompatiblesDetail">Detectadas</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Dentro de Plazo</div>
                <div class="stat-value" id="dentroPlazoCount">0</div>
                <div class="stat-change" id="dentroPlazoPercent">0% del total</div>
            </div>
        </div>
    </div>

    <!-- Tabla de validaci√≥n de requisitos -->
    <div class="card">
        <div class="card-header">
            <h3>Validaci√≥n de Requisitos</h3>
            <div class="filters-inline">
                <select class="select-sm" id="validacionEstadoFilter">
                    <option value="">Todos los estados</option>
                    <option value="COMPLETO">Completos</option>
                    <option value="PENDIENTE">Pendientes</option>
                    <option value="OBSERVACIONES">Con observaciones</option>
                </select>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Estudiante</th>
                            <th>Tipo Beca</th>
                            <th>Documentaci√≥n</th>
                            <th>Becas Previas</th>
                            <th>Fecha L√≠mite</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="administrativoValidacionBody">
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Checklist de Validaci√≥n (puede quedarse est√°tico) -->
    <div class="card">
        <div class="card-header">
            <h3>Checklist de Validaci√≥n</h3>
        </div>
        <div class="card-body">
            <div class="validation-checklist">
                <div class="checklist-item">
                    <input type="checkbox" id="check1" checked>
                    <label for="check1">
                        <h4>Verificar documentaci√≥n completa</h4>
                        <p>Todos los documentos requeridos est√°n presentes y legibles</p>
                    </label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check2" checked>
                    <label for="check2">
                        <h4>Validar fechas de solicitud</h4>
                        <p>La solicitud fue presentada dentro del plazo establecido</p>
                    </label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check3">
                    <label for="check3">
                        <h4>Verificar becas incompatibles</h4>
                        <p>El estudiante no tiene otra beca que genere conflicto</p>
                    </label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check4" checked>
                    <label for="check4">
                        <h4>Confirmar cumplimiento de requisitos</h4>
                        <p>Todos los requisitos del reglamento est√°n cumplidos</p>
                    </label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check5">
                    <label for="check5">
                        <h4>Consolidar expediente</h4>
                        <p>Toda la documentaci√≥n est√° organizada y archivada</p>
                    </label>
                </div>
            </div>
        </div>
    </div>
</div>

            <!-- Comunicaci√≥n de Resultados View -->
<div id="comunicacion-view" class="view">
    <div class="view-header">
        <div>
            <h2>Comunicaci√≥n de Resultados</h2>
            <p class="text-muted">Notificaciones y comunicados a estudiantes</p>
        </div>
        <button class="btn btn-primary" id="btnNuevaComunicacion">
            Nueva Comunicaci√≥n
        </button>
    </div>

    <!-- Estad√≠sticas de comunicaci√≥n -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 8l7-5 7 5v9a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V8z" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Notificaciones Enviadas</div>
                <div class="stat-value" id="notificacionesEnviadasCount">0</div>
                <div class="stat-change positive" id="notificacionesEnviadasPeriodo">
                    Este mes
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Tasa de Apertura</div>
                <div class="stat-value" id="tasaAperturaValue">0%</div>
                <div class="stat-change positive" id="tasaAperturaChange">
                    +0% vs mes anterior
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Pendientes de Env√≠o</div>
                <div class="stat-value" id="pendientesEnvioCount">0</div>
                <div class="stat-change" id="pendientesEnvioLabel">
                    Programadas
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Respuestas Recibidas</div>
                <div class="stat-value" id="respuestasRecibidasCount">0</div>
                <div class="stat-change" id="respuestasRecibidasLabel">
                    Requieren atenci√≥n
                </div>
            </div>
        </div>
    </div>

    <!-- Plantillas de Comunicaci√≥n -->
    <div class="card">
        <div class="card-header">
            <h3>Plantillas de Comunicaci√≥n</h3>
        </div>
        <div class="card-body">
            <div class="templates-grid">
                <div class="template-card">
                    <div class="template-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">‚úì</div>
                    <h4>Beca Aprobada</h4>
                    <p>Notificaci√≥n de aprobaci√≥n con detalles del porcentaje y vigencia</p>
                    <button
                        class="btn btn-secondary btn-sm btn-use-template"
                        data-template-type="APROBADA">
                        Usar Plantilla
                    </button>
                </div>
                <div class="template-card">
                    <div class="template-icon" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">‚úó</div>
                    <h4>Beca Denegada</h4>
                    <p>Notificaci√≥n de rechazo con motivos y opciones de apelaci√≥n</p>
                    <button
                        class="btn btn-secondary btn-sm btn-use-template"
                        data-template-type="DENEGADA">
                        Usar Plantilla
                    </button>
                </div>
                <div class="template-card">
                    <div class="template-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">üìÑ</div>
                    <h4>Documentos Pendientes</h4>
                    <p>Solicitud de documentaci√≥n faltante con fecha l√≠mite</p>
                    <button
                        class="btn btn-secondary btn-sm btn-use-template"
                        data-template-type="DOCS_PENDIENTES">
                        Usar Plantilla
                    </button>
                </div>
                <div class="template-card">
                    <div class="template-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">üì¢</div>
                    <h4>Convocatoria Abierta</h4>
                    <p>Anuncio de nueva convocatoria con fechas y requisitos</p>
                    <button
                        class="btn btn-secondary btn-sm btn-use-template"
                        data-template-type="CONVOCATORIA">
                        Usar Plantilla
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Historial de Comunicaciones -->
    <div class="card">
        <div class="card-header">
            <h3>Historial de Comunicaciones</h3>
            <div class="filters-inline">
                <select class="select-sm" id="comunicacionesTipoFilter">
                    <option value="">Todas</option>
                    <option value="APROBACION">Aprobaciones</option>
                    <option value="RECHAZO">Rechazos</option>
                    <option value="SOLICITUD">Solicitudes</option>
                </select>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Destinatario</th>
                            <th>Tipo</th>
                            <th>Asunto</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="comunicacionesHistorialBody">
                        <!-- Filas del historial se cargan desde el backend
                        <tr>
                            <td>15 Ene 2024</td>
                            <td>Mar√≠a Gonz√°lez</td>
                            <td><span class="badge badge-success">Aprobaci√≥n</span></td>
                            <td>Beca Acad√©mica Aprobada - 100%</td>
                            <td><span class="badge badge-success">Entregado</span></td>
                            <td>
                                <button class="btn-icon" title="Ver">üëÅ</button>
                                <button class="btn-icon" title="Reenviar">üìß</button>
                            </td>
                        </tr>
                        -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Proceso de Apelaci√≥n -->
    <div class="card">
        <div class="card-header">
            <h3>Proceso de Apelaci√≥n</h3>
        </div>
        <div class="card-body">
            <div class="appeals-list" id="appealsList">
            
            </div>
        </div>
    </div>
</div>


           <!-- Formalizaci√≥n View -->
<div id="formalizacion-view" class="view">
    <div class="view-header">
        <div>
            <h2>Formalizaci√≥n de Becas</h2>
            <p class="text-muted">Contratos y acuerdos de becas</p>
        </div>
        <button class="btn btn-primary" id="btnGenerarContrato">
            Generar Contrato
        </button>
    </div>

    <!-- Estad√≠sticas de formalizaci√≥n -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Contratos Firmados</div>
                <div class="stat-value" id="contratosFirmadosCount">0</div>
                <div class="stat-change positive" id="contratosFirmadosPorcentaje">
                    0% completado
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Pendientes de Firma</div>
                <div class="stat-value" id="contratosPendientesFirmaCount">0</div>
                <div class="stat-change" id="contratosPendientesFirmaLabel">
                    Requieren seguimiento
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M14 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Registrados en Sistema</div>
                <div class="stat-value" id="contratosRegistradosCount">0</div>
                <div class="stat-change" id="contratosRegistradosLabel">
                    Aplicados a contabilidad
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Monto Total Formalizado</div>
                <div class="stat-value" id="montoTotalFormalizado">$0</div>
                <div class="stat-change" id="montoTotalFormalizadoPeriodo">
                    Este per√≠odo
                </div>
            </div>
        </div>
    </div>

    <!-- Contratos Pendientes de Firma -->
    <div class="card">
        <div class="card-header">
            <h3>Contratos Pendientes de Firma</h3>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Estudiante</th>
                            <th>Tipo Beca</th>
                            <th>Porcentaje</th>
                            <th>Monto</th>
                            <th>Fecha Generaci√≥n</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="contratosPendientesBody">
                    
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Compromisos del Contrato (texto fijo, no requiere backend) -->
    <div class="card">
        <div class="card-header">
            <h3>Compromisos del Contrato</h3>
        </div>
        <div class="card-body">
            <div class="commitments-list">
                <div class="commitment-item">
                    <span class="commitment-icon">üìã</span>
                    <div class="commitment-content">
                        <h4>Requisitos Acad√©micos</h4>
                        <p>Mantener promedio m√≠nimo seg√∫n tipo de beca y cursar carga acad√©mica completa</p>
                    </div>
                </div>
                <div class="commitment-item">
                    <span class="commitment-icon">üìä</span>
                    <div class="commitment-content">
                        <h4>Reportes Peri√≥dicos</h4>
                        <p>Presentar reportes semestrales de desempe√±o acad√©mico</p>
                    </div>
                </div>
                <div class="commitment-item">
                    <span class="commitment-icon">üîÑ</span>
                    <div class="commitment-content">
                        <h4>Renovaci√≥n</h4>
                        <p>Solicitar renovaci√≥n dentro de los plazos establecidos</p>
                    </div>
                </div>
                <div class="commitment-item">
                    <span class="commitment-icon">‚ö†Ô∏è</span>
                    <div class="commitment-content">
                        <h4>Notificaci√≥n de Cambios</h4>
                        <p>Informar cualquier cambio en situaci√≥n acad√©mica o socioecon√≥mica</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Registro en Sistema Contable -->
    <div class="card">
        <div class="card-header">
            <h3>Registro en Sistema Contable</h3>
        </div>
        <div class="card-body">
            <div class="accounting-integration">
                <div class="integration-status">
                    <div class="status-icon" id="integracionContableIcon"
                         style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                        ‚úì
                    </div>
                    <div>
                        <h4 id="integracionContableTitulo">Integraci√≥n Activa</h4>
                        <p id="integracionContableDescripcion">
                            Conexi√≥n con sistema contable establecida
                        </p>
                    </div>
                </div>
                <div class="integration-actions">
                    <button class="btn btn-primary" id="btnSincronizarBecas">
                        Sincronizar Becas
                    </button>
                    <button class="btn btn-secondary" id="btnVerLogContable">
                        Ver Log
                    </button>
                </div>
            </div>
            <div class="sync-summary">
                <div class="sync-item">
                    <span class="label">√öltima sincronizaci√≥n:</span>
                    <span class="value" id="ultimaSincronizacionText">
                        ‚Äî 
                    </span>
                </div>
                <div class="sync-item">
                    <span class="label">Becas sincronizadas:</span>
                    <span class="value" id="becasSincronizadasText">
                        0 de 0
                    </span>
                </div>
                <div class="sync-item">
                    <span class="label">Errores:</span>
                    <span class="value badge badge-success" id="erroresSyncBadge">
                        0
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>


            <!-- Archivo View -->
<div id="archivo-view" class="view">
    <div class="view-header">
        <div>
            <h2>Archivo de Expedientes</h2>
            <p class="text-muted">Expedientes cerrados y archivo hist√≥rico</p>
        </div>
        <button class="btn btn-primary" id="btnGenerarReporteArchivo">
            Generar Reporte Estad√≠stico
        </button>
    </div>

    <!-- Estad√≠sticas del archivo (se cargan desde backend) -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(6, 182, 212, 0.1); color: #06b6d4;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M4 4h12v3H4zM4 7v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V7" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Expedientes Archivados</div>
                <div class="stat-value" id="expedientesArchivadosCount">0</div>
                <div class="stat-change" id="expedientesArchivadosLabel">
                    Total hist√≥rico
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Becas Completadas</div>
                <div class="stat-value" id="becasCompletadasCount">0</div>
                <div class="stat-change positive" id="becasCompletadasPorcentaje">
                    0% tasa de √©xito
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Inversi√≥n Total</div>
                <div class="stat-value" id="inversionTotalHistorica">$0</div>
                <div class="stat-change">Hist√≥rico</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M6 14v3M10 11v6M14 8v8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Promedio General</div>
                <div class="stat-value" id="promedioGeneralHistorico">0.0</div>
                <div class="stat-change">Becados hist√≥ricos</div>
            </div>
        </div>
    </div>

    <!-- B√∫squeda de expedientes -->
    <div class="card">
        <div class="card-header">
            <h3>B√∫squeda de Expedientes</h3>
        </div>
        <div class="card-body">
            <div class="search-filters">
                <input type="text"
                       class="input"
                       id="archivoSearchInput"
                       placeholder="Buscar por nombre, matr√≠cula o ID...">
                <select class="select" id="archivoYearFilter">
                    <option value="">Todos los a√±os</option>
                    <option value="2024">2024</option>
                    <option value="2023">2023</option>
                    <option value="2022">2022</option>
                    <option value="2021">2021</option>
                </select>
                <select class="select" id="archivoTipoFilter">
                    <option value="">Todos los tipos</option>
                    <option value="ACADEMICA">Acad√©mica</option>
                    <option value="SOCIOECONOMICA">Socioecon√≥mica</option>
                    <option value="DEPORTIVA">Deportiva</option>
                    <option value="CULTURAL">Cultural</option>
                </select>
                <select class="select" id="archivoEstadoFilter">
                    <option value="">Todos los estados</option>
                    <option value="COMPLETADA">Completada</option>
                    <option value="SUSPENDIDA">Suspendida</option>
                    <option value="RETIRADA">Retirada</option>
                </select>
                <button class="btn btn-primary" id="btnBuscarExpedientesArchivo">
                    Buscar
                </button>
            </div>
        </div>
    </div>

    <!-- Expedientes recientes (se llena desde backend) -->
    <div class="card">
        <div class="card-header">
            <h3>Expedientes Recientes</h3>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Estudiante</th>
                            <th>Tipo Beca</th>
                            <th>Per√≠odo</th>
                            <th>Estado Final</th>
                            <th>Fecha Cierre</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="archivoExpedientesBody">
                        <!-- Filas generadas por JS a partir de /ts/archivo/expedientes -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Estad√≠sticas hist√≥ricas (resumen que puedes calcular en el back) -->
    <div class="card">
        <div class="card-header">
            <h3>Estad√≠sticas Hist√≥ricas</h3>
        </div>
        <div class="card-body">
            <div class="stats-summary">
                <div class="summary-section">
                    <h4>Por Tipo de Beca</h4>
                    <div class="summary-list">
                        <div class="summary-item">
                            <span class="label">Acad√©micas:</span>
                            <span class="value" id="archivoTipoAcademica">
                                0 (0%)
                            </span>
                        </div>
                        <div class="summary-item">
                            <span class="label">Socioecon√≥micas:</span>
                            <span class="value" id="archivoTipoSocioeconomica">
                                0 (0%)
                            </span>
                        </div>
                        <div class="summary-item">
                            <span class="label">Deportivas:</span>
                            <span class="value" id="archivoTipoDeportiva">
                                0 (0%)
                            </span>
                        </div>
                        <div class="summary-item">
                            <span class="label">Culturales:</span>
                            <span class="value" id="archivoTipoCultural">
                                0 (0%)
                            </span>
                        </div>
                    </div>
                </div>

                <div class="summary-section">
                    <h4>Por Estado Final</h4>
                    <div class="summary-list">
                        <div class="summary-item">
                            <span class="label">Completadas:</span>
                            <span class="value" id="archivoEstadoCompletadas">
                                0 (0%)
                            </span>
                        </div>
                        <div class="summary-item">
                            <span class="label">Suspendidas:</span>
                            <span class="value" id="archivoEstadoSuspendidas">
                                0 (0%)
                            </span>
                        </div>
                        <div class="summary-item">
                            <span class="label">Retiradas:</span>
                            <span class="value" id="archivoEstadoRetiradas">
                                0 (0%)
                            </span>
                        </div>
                    </div>
                </div>

                <div class="summary-section">
                    <h4>Inversi√≥n por A√±o</h4>
                    <div class="summary-list">
                        <div class="summary-item">
                            <span class="label">2023:</span>
                            <span class="value" id="archivoInversion2023">
                                $0
                            </span>
                        </div>
                        <div class="summary-item">
                            <span class="label">2022:</span>
                            <span class="value" id="archivoInversion2022">
                                $0
                            </span>
                        </div>
                        <div class="summary-item">
                            <span class="label">2021:</span>
                            <span class="value" id="archivoInversion2021">
                                $0
                            </span>
                        </div>
                        <div class="summary-item">
                            <span class="label">Anteriores:</span>
                            <span class="value" id="archivoInversionAnteriores">
                                $0
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Retroalimentaci√≥n del programa (puede quedarse est√°tico o venir del back si quieres) -->
    <div class="card">
        <div class="card-header">
            <h3>Retroalimentaci√≥n del Programa</h3>
        </div>
        <div class="card-body">
            <div class="feedback-section" id="archivoFeedbackSection">
                <h4>√Åreas de Mejora Identificadas</h4>
                <ul class="feedback-list">
                    <li>Reducir tiempo de evaluaci√≥n socioecon√≥mica (actualmente 15 d√≠as promedio)</li>
                    <li>Mejorar comunicaci√≥n de requisitos a estudiantes</li>
                    <li>Implementar sistema de alertas tempranas para becados en riesgo</li>
                    <li>Digitalizar completamente el proceso de firma de contratos</li>
                    <li>Ampliar cobertura de becas socioecon√≥micas</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Configuraci√≥n View (puede quedar igual est√°tica por ahora) -->
<div id="configuracion-view" class="view">
    <div class="view-header">
        <h2>Configuraci√≥n</h2>
        <p class="text-muted">Ajustes del sistema</p>
    </div>
    <div class="card">
        <div class="card-body">
            <p>Contenido de configuraci√≥n...</p>
        </div>
    </div>
</div>

            <!-- CMI Views -->
            <!-- Add Panel view as the main CMI view -->
            <<div id="cmi-panel-view" class="view">
                <div class="view-header">
                    <div>
                        <h1>Cuadro de Mando Integral</h1>
                        <p class="text-muted">Dashboard del Cuadro de Mando Integral (CMI)</p>
                    </div>
                </div>

                <!-- Added filter section for periods -->
                <div class="card">
                    <div class="card-body">
                        <div class="filters-bar" style="gap: 16px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <label for="filtroPeriodo" style="font-weight: 500; color: var(--text-primary);">Seleccionar Per√≠odo:</label>
                                <select id="filtroPeriodo" class="select-sm" style="min-width: 200px;">
                                    <option value="2025-1">2025 - Ciclo I</option>
                                    <option value="2025-2">2025 - Ciclo II</option>
                                    <option value="2024-3">2024 - Ciclo III</option>
                                    <option value="2024-2">2024 - Ciclo II</option>
                                    <option value="2024-1" selected>2024 - Ciclo I</option>
                                </select>
                            </div>
                            <button id="btnAplicarFiltro" class="btn btn-primary">Cargar Datos</button>
                        </div>
                    </div>
                </div>

                <!-- Main dashboard structure with hierarchical accordion layout -->
                <main id="dashboardCmi" class="dashboard-cmi">
                    <!-- Perspectiva Financiera -->
                    <div class="perspectiva" data-perspectiva="financiera">
                        <div class="perspectiva-header" onclick="togglePerspectiva(this)">
                            <span class="perspectiva-toggle">‚ñº</span>
                            <h2 class="perspectiva-nombre">Financiera</h2>
                            <span class="perspectiva-stats">(3 Objetivos, 8 Indicadores)</span>
                        </div>
                        
                        <div class="perspectiva-content">
                            <!-- Objetivo 1 -->
                            <div class="objetivo" data-objetivo="objetivo-1">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Optimizar la Ejecuci√≥n del Presupuesto</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="ind-1">Porcentaje de Ejecuci√≥n Presupuestaria</td>
                                                    <td data-meta="85">85%</td>
                                                    <td data-medicion="78">78%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Revisi√≥n de gastos, Optimizaci√≥n de recursos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-2">Variaci√≥n Presupuestaria</td>
                                                    <td data-meta="5">5%</td>
                                                    <td data-medicion="3.2">3.2%</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Control de desviaciones, Ajustes mensuales</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Objetivo 2 -->
                            <div class="objetivo" data-objetivo="objetivo-2">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Rentabilidad de Inversiones</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="ind-3">ROI - Retorno sobre Inversi√≥n</td>
                                                    <td data-meta="12">12%</td>
                                                    <td data-medicion="15.5">15.5%</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>An√°lisis de inversiones, Reporte trimestral</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-4">Tasa de Crecimiento Financiero</td>
                                                    <td data-meta="8">8%</td>
                                                    <td data-medicion="6.8">6.8%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Estrategia de crecimiento, Evaluaci√≥n de oportunidades</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Objetivo 3 -->
                            <div class="objetivo" data-objetivo="objetivo-3">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Gesti√≥n de Costos Operativos</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="ind-5">Reducci√≥n de Costos Operativos</td>
                                                    <td data-meta="10">10%</td>
                                                    <td data-medicion="12.3">12.3%</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Automatizaci√≥n de procesos, Auditor√≠a de gastos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-6">Eficiencia de Gastos por Estudiante</td>
                                                    <td data-meta="2500">$2500</td>
                                                    <td data-medicion="2350">$2350</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Revisi√≥n de programas, Optimizaci√≥n de recursos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-7">√çndice de Productividad</td>
                                                    <td data-meta="1.8">1.8</td>
                                                    <td data-medicion="1.65">1.65</td>
                                                    <td><span class="semaforo rojo" title="En riesgo">‚úó</span></td>
                                                    <td>Capacitaci√≥n del personal, Mejora de procesos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-8">Ratio Gastos Administrativos</td>
                                                    <td data-meta="15">15%</td>
                                                    <td data-medicion="16.2">16.2%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Reducci√≥n de gastos administrativos, Digitalizaci√≥n</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Perspectiva Beneficiarios -->
                    <div class="perspectiva" data-perspectiva="beneficiarios">
                        <div class="perspectiva-header" onclick="togglePerspectiva(this)">
                            <span class="perspectiva-toggle">‚ñº</span>
                            <h2 class="perspectiva-nombre">Beneficiarios</h2>
                            <span class="perspectiva-stats">(3 Objetivos, 8 Indicadores)</span>
                        </div>
                        
                        <div class="perspectiva-content">
                            <!-- Objetivo 1 -->
                            <div class="objetivo" data-objetivo="objetivo-benef-1">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Optimizar la Ejecuci√≥n del Presupuesto</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="benef-ind-1">Porcentaje de Ejecuci√≥n Presupuestaria</td>
                                                    <td data-meta="85">85%</td>
                                                    <td data-medicion="78">78%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Revisi√≥n de gastos, Optimizaci√≥n de recursos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="benef-ind-2">Variaci√≥n Presupuestaria</td>
                                                    <td data-meta="5">5%</td>
                                                    <td data-medicion="3.2">3.2%</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Control de desviaciones, Ajustes mensuales</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Objetivo 2 -->
                            <div class="objetivo" data-objetivo="objetivo-benef-2">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Rentabilidad de Inversiones</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="benef-ind-3">ROI - Retorno sobre Inversi√≥n</td>
                                                    <td data-meta="12">12%</td>
                                                    <td data-medicion="15.5">15.5%</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>An√°lisis de inversiones, Reporte trimestral</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="benef-ind-4">Tasa de Crecimiento Financiero</td>
                                                    <td data-meta="8">8%</td>
                                                    <td data-medicion="6.8">6.8%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Estrategia de crecimiento, Evaluaci√≥n de oportunidades</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Objetivo 3 -->
                            <div class="objetivo" data-objetivo="objetivo-benef-3">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Gesti√≥n de Costos Operativos</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="benef-ind-5">Reducci√≥n de Costos Operativos</td>
                                                    <td data-meta="10">10%</td>
                                                    <td data-medicion="12.3">12.3%</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Automatizaci√≥n de procesos, Auditor√≠a de gastos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="benef-ind-6">Eficiencia de Gastos por Estudiante</td>
                                                    <td data-meta="2500">$2500</td>
                                                    <td data-medicion="2350">$2350</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Revisi√≥n de programas, Optimizaci√≥n de recursos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="benef-ind-7">√çndice de Productividad</td>
                                                    <td data-meta="1.8">1.8</td>
                                                    <td data-medicion="1.65">1.65</td>
                                                    <td><span class="semaforo rojo" title="En riesgo">‚úó</span></td>
                                                    <td>Capacitaci√≥n del personal, Mejora de procesos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="benef-ind-8">Ratio Gastos Administrativos</td>
                                                    <td data-meta="15">15%</td>
                                                    <td data-medicion="16.2">16.2%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Reducci√≥n de gastos administrativos, Digitalizaci√≥n</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Perspectiva Procesos Internos -->
                    <div class="perspectiva" data-perspectiva="procesos">
                        <div class="perspectiva-header" onclick="togglePerspectiva(this)">
                            <span class="perspectiva-toggle">‚ñº</span>
                            <h2 class="perspectiva-nombre">Procesos Internos</h2>
                            <span class="perspectiva-stats">(2 Objetivos, 6 Indicadores)</span>
                        </div>
                        
                        <div class="perspectiva-content">
                            <!-- Objetivo 4 -->
                            <div class="objetivo" data-objetivo="objetivo-4">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Mejora de Procesos de Solicitud</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="ind-9">Tiempo de Procesamiento de Solicitudes</td>
                                                    <td data-meta="15">15 d√≠as</td>
                                                    <td data-medicion="12">12 d√≠as</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Automatizaci√≥n de tr√°mites, Capacitaci√≥n de staff</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-10">Tasa de Rechazo de Solicitudes Incompletas</td>
                                                    <td data-meta="5">5%</td>
                                                    <td data-medicion="3.1">3.1%</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Validaci√≥n autom√°tica, Gu√≠a mejorada para solicitantes</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Objetivo 5 -->
                            <div class="objetivo" data-objetivo="objetivo-5">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Calidad de Servicios</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="ind-11">Satisfacci√≥n de Usuarios</td>
                                                    <td data-meta="4.5">4.5/5</td>
                                                    <td data-medicion="4.2">4.2/5</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Mejora de atenci√≥n, Feedback de usuarios</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-12">Disponibilidad del Sistema</td>
                                                    <td data-meta="99.5">99.5%</td>
                                                    <td data-medicion="99.8">99.8%</td>
                                                    <td><span class="semaforo verde" title="Cumplido">‚úì</span></td>
                                                    <td>Mantenimiento preventivo, Monitoreo continuo</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-13">Tasa de Errores en Procesos</td>
                                                    <td data-meta="0.5">0.5%</td>
                                                    <td data-medicion="0.8">0.8%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Control de calidad, Auditor√≠a de procesos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-14">Documentaci√≥n de Procesos</td>
                                                    <td data-meta="100">100%</td>
                                                    <td data-medicion="85">85%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Documentaci√≥n de procedimientos, Actualizaci√≥n de manuales</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Perspectiva Aprendizaje y Crecimiento -->
                    <div class="perspectiva" data-perspectiva="aprendizaje">
                        <div class="perspectiva-header" onclick="togglePerspectiva(this)">
                            <span class="perspectiva-toggle">‚ñº</span>
                            <h2 class="perspectiva-nombre">Aprendizaje y Crecimiento</h2>
                            <span class="perspectiva-stats">(2 Objetivos, 5 Indicadores)</span>
                        </div>
                        
                        <div class="perspectiva-content">
                            <!-- Objetivo 6 -->
                            <div class="objetivo" data-objetivo="objetivo-6">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Desarrollo del Talento Humano</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="ind-15">Horas de Capacitaci√≥n por Empleado</td>
                                                    <td data-meta="40">40 horas</td>
                                                    <td data-medicion="32">32 horas</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Plan de capacitaci√≥n, Cursos especializados</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-16">Tasa de Retenci√≥n del Personal</td>
                                                    <td data-meta="95">95%</td>
                                                    <td data-medicion="92">92%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Plan de bienestar, Revisi√≥n de compensaciones</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Objetivo 7 -->
                            <div class="objetivo" data-objetivo="objetivo-7">
                                <div class="objetivo-header" onclick="toggleObjetivo(this)">
                                    <span class="objetivo-toggle">‚ñ∂</span>
                                    <h3 class="objetivo-nombre">Innovaci√≥n Tecnol√≥gica</h3>
                                </div>
                                
                                <div class="objetivo-content">
                                    <div class="table-responsive">
                                        <table class="table indicadores-table">
                                            <thead>
                                                <tr>
                                                    <th>Indicador</th>
                                                    <th>Meta</th>
                                                    <th>Medici√≥n</th>
                                                    <th>Estado</th>
                                                    <th>Acciones Vinculadas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td data-indicador="ind-17">Proyectos de Innovaci√≥n Implementados</td>
                                                    <td data-meta="5">5 proyectos</td>
                                                    <td data-medicion="3">3 proyectos</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Evaluaci√≥n de propuestas, Asignaci√≥n de recursos</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-18">Adopci√≥n de Tecnolog√≠a por Usuarios</td>
                                                    <td data-meta="85">85%</td>
                                                    <td data-medicion="78">78%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Capacitaci√≥n en nuevas herramientas, Soporte t√©cnico</td>
                                                </tr>
                                                <tr>
                                                    <td data-indicador="ind-19">Reducci√≥n de Procesos Manuales</td>
                                                    <td data-meta="60">60%</td>
                                                    <td data-medicion="45">45%</td>
                                                    <td><span class="semaforo amarillo" title="En progreso">‚ö†</span></td>
                                                    <td>Automatizaci√≥n de tareas, Integraci√≥n de sistemas</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>

            <div id="cmi-perspectivas-view" class="view">
                <div class="view-header">
                    <div>
                        <h1>Configurar Perspectivas</h1>
                        <p class="text-muted">Gesti√≥n de perspectivas del CMI</p>
                    </div>
                    <button class="btn btn-primary" id="btnNuevaPerspectiva">Crear Nueva Perspectiva</button>
                </div>

                <!-- Modal/Formulario para crear/editar perspectivas -->
                <div id="modalPerspectiva" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Nueva Perspectiva</h2>
                            <button class="btn-close" id="btnCerrarModal">&times;</button>
                        </div>
                        <form id="formPerspectiva" class="modal-body">
                            <input type="hidden" id="id_perspectiva">
                            
                            <div class="form-group">
                                <label for="nombrePerspectiva">Nombre de la Perspectiva</label>
                                <input type="text" id="nombrePerspectiva" name="nombrePerspectiva" required placeholder="Ej. Financiera, Clientes, Procesos Internos...">
                            </div>

                            <div class="form-group">
                                <label for="descripcionPerspectiva">Descripci√≥n</label>
                                <textarea id="descripcionPerspectiva" name="descripcionPerspectiva" placeholder="Describe el prop√≥sito de esta perspectiva..." rows="4"></textarea>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" id="btnCancelarPerspectiva">Cancelar</button>
                                <button type="submit" class="btn btn-primary" id="btnGuardarPerspectiva">Guardar</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!--Tabla de perspectivas existentes -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="tablaPerspectivas" class="table">
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Descripci√≥n</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data de perspectivas de ejemplo -->
                                    <tr data-perspectiva-id="1">
                                        <td>
                                            <strong>Financiera</strong>
                                        </td>
                                        <td>Gesti√≥n del desempe√±o financiero y presupuestario de la instituci√≥n</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar" data-id="1">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar" data-id="1">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-perspectiva-id="2">
                                        <td>
                                            <strong>Beneficiarios</strong>
                                        </td>
                                        <td>Satisfacci√≥n y retenci√≥n de estudiantes becarios</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar" data-id="2">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar" data-id="2">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-perspectiva-id="3">
                                        <td>
                                            <strong>Procesos Internos</strong>
                                        </td>
                                        <td>Eficiencia de los procesos administrativos y acad√©micos</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar" data-id="3">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar" data-id="3">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-perspectiva-id="4">
                                        <td>
                                            <strong>Aprendizaje y Crecimiento</strong>
                                        </td>
                                        <td>Desarrollo del talento humano e innovaci√≥n tecnol√≥gica</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar" data-id="4">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar" data-id="4">Eliminar</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div id="cmi-objetivos-view" class="view">
                <div class="view-header">
                    <div>
                        <h1>Configurar Objetivos</h1>
                        <p class="text-muted">Gesti√≥n de objetivos del CMI</p>
                    </div>
                    <button class="btn btn-primary" id="btnNuevoObjetivo">Crear Nuevo Objetivo</button>
                </div>

                <!-- Modal/Formulario para crear/editar objetivos -->
                <div id="modalObjetivo" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Nuevo Objetivo</h2>
                            <button class="btn-close" id="btnCerrarModalObjetivo">&times;</button>
                        </div>
                        <form id="formObjetivo" class="modal-body">
                            <input type="hidden" id="id_objetivo">
                            
                            <div class="form-group">
                                <label for="selectPerspectivaObjetivo">Perspectiva</label>
                                <select id="selectPerspectivaObjetivo" name="selectPerspectivaObjetivo" required>
                                    <option value="">Selecciona una perspectiva...</option>
                                    <option value="1">Financiera</option>
                                    <option value="2">Beneficiarios</option>
                                    <option value="3">Procesos Internos</option>
                                    <option value="4">Aprendizaje y Crecimiento</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="nombreObjetivo">Nombre del Objetivo</label>
                                <input type="text" id="nombreObjetivo" name="nombreObjetivo" required placeholder="Ej. Optimizar la Ejecuci√≥n del Presupuesto">
                            </div>

                            <div class="form-group">
                                <label for="descripcionObjetivo">Descripci√≥n</label>
                                <textarea id="descripcionObjetivo" name="descripcionObjetivo" placeholder="Describe el objetivo en detalle..." rows="5"></textarea>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" id="btnCancelarObjetivo">Cancelar</button>
                                <button type="submit" class="btn btn-primary" id="btnGuardarObjetivo">Guardar</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Tabla de objetivos existentes -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="tablaObjetivos" class="table">
                                <thead>
                                    <tr>
                                        <th>Nombre del Objetivo</th>
                                        <th>Descripci√≥n</th>
                                        <th>Perspectiva</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data de objetivos de ejemplo -->
                                    <tr data-objetivo-id="1">
                                        <td><strong>Optimizar la Ejecuci√≥n del Presupuesto</strong></td>
                                        <td>Maximizar la utilizaci√≥n de recursos financieros disponibles</td>
                                        <td>Financiera</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-objetivo" data-id="1">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-objetivo" data-id="1">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-objetivo-id="2">
                                        <td><strong>Rentabilidad de Inversiones</strong></td>
                                        <td>Incrementar el retorno sobre inversi√≥n de los recursos asignados</td>
                                        <td>Financiera</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-objetivo" data-id="2">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-objetivo" data-id="2">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-objetivo-id="3">
                                        <td><strong>Gesti√≥n de Costos Operativos</strong></td>
                                        <td>Reducir y controlar los gastos operativos de la organizaci√≥n</td>
                                        <td>Financiera</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-objetivo" data-id="3">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-objetivo" data-id="3">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-objetivo-id="4">
                                        <td><strong>Mejora de Procesos de Solicitud</strong></td>
                                        <td>Agilizar y mejorar la calidad del proceso de solicitud de becas</td>
                                        <td>Procesos Internos</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-objetivo" data-id="4">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-objetivo" data-id="4">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-objetivo-id="5">
                                        <td><strong>Calidad de Servicios</strong></td>
                                        <td>Garantizar excelencia en la prestaci√≥n de servicios administrativos</td>
                                        <td>Procesos Internos</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-objetivo" data-id="5">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-objetivo" data-id="5">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-objetivo-id="6">
                                        <td><strong>Desarrollo del Talento Humano</strong></td>
                                        <td>Fomentar el crecimiento profesional y personal del equipo</td>
                                        <td>Aprendizaje y Crecimiento</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-objetivo" data-id="6">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-objetivo" data-id="6">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-objetivo-id="7">
                                        <td><strong>Innovaci√≥n Tecnol√≥gica</strong></td>
                                        <td>Implementar soluciones tecnol√≥gicas innovadoras en los procesos</td>
                                        <td>Aprendizaje y Crecimiento</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-objetivo" data-id="7">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-objetivo" data-id="7">Eliminar</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div id="cmi-indicadores-view" class="view">
                <div class="view-header">
                    <div>
                        <h1>Configurar Indicadores</h1>
                        <p class="text-muted">Gesti√≥n de indicadores del CMI</p>
                    </div>
                    <button class="btn btn-primary" id="btnNuevoIndicador">Crear Nuevo Indicador</button>
                </div>

                <!-- Modal/Formulario para crear/editar indicadores -->
                <div id="modalIndicador" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Nuevo Indicador</h2>
                            <button class="btn-close" id="btnCerrarModalIndicador">&times;</button>
                        </div>
                        <form id="formIndicador" class="modal-body">
                            <input type="hidden" id="id_indicador">
                            
                            <div class="form-group">
                                <label for="selectObjetivoIndicador">Objetivo al que pertenece</label>
                                <select id="selectObjetivoIndicador" name="selectObjetivoIndicador" required>
                                    <option value="">Selecciona un objetivo...</option>
                                    <option value="1">Optimizar la Ejecuci√≥n del Presupuesto</option>
                                    <option value="2">Rentabilidad de Inversiones</option>
                                    <option value="3">Gesti√≥n de Costos Operativos</option>
                                    <option value="4">Mejora de Procesos de Solicitud</option>
                                    <option value="5">Calidad de Servicios</option>
                                    <option value="6">Desarrollo del Talento Humano</option>
                                    <option value="7">Innovaci√≥n Tecnol√≥gica</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="nombreIndicador">Nombre del Indicador</label>
                                <input type="text" id="nombreIndicador" name="nombreIndicador" required placeholder="Ej. Porcentaje de Ejecuci√≥n Presupuestaria">
                            </div>

                            <div class="form-group">
                                <label for="formulaSpNombre">Nombre del SP de C√°lculo</label>
                                <input type="text" id="formulaSpNombre" name="formulaSpNombre" placeholder="Ej: SP_CALC_...">
                            </div>

                            <div class="form-group">
                                <label for="unidadMedida">Unidad de Medida</label>
                                <input type="text" id="unidadMedida" name="unidadMedida" placeholder="Ej: %, D√≠as, $">
                            </div>

                            <div class="form-group">
                                <label for="activoIndicador" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" id="activoIndicador" name="activoIndicador" checked>
                                    <span>Activo</span>
                                </label>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" id="btnCancelarIndicador">Cancelar</button>
                                <button type="submit" class="btn btn-primary" id="btnGuardarIndicador">Guardar</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Tabla de indicadores existentes -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="tablaIndicadores" class="table">
                                <thead>
                                    <tr>
                                        <th>Indicador</th>
                                        <th>Objetivo</th>
                                        <th>SP de C√°lculo</th>
                                        <th>Unidad</th>
                                        <th>Activo</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data de indicadores de ejemplo -->
                                    <tr data-indicador-id="1">
                                        <td><strong>Porcentaje de Ejecuci√≥n Presupuestaria</strong></td>
                                        <td>Optimizar la Ejecuci√≥n del Presupuesto</td>
                                        <td>SP_CALC_EJEC_PRES</td>
                                        <td>%</td>
                                        <td>S√≠</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="1">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="1">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-indicador-id="2">
                                        <td><strong>Variaci√≥n Presupuestaria</strong></td>
                                        <td>Optimizar la Ejecuci√≥n del Presupuesto</td>
                                        <td>SP_CALC_VAR_PRES</td>
                                        <td>%</td>
                                        <td>S√≠</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="2">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="2">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-indicador-id="3">
                                        <td><strong>ROI - Retorno sobre Inversi√≥n</strong></td>
                                        <td>Rentabilidad de Inversiones</td>
                                        <td>SP_CALC_ROI</td>
                                        <td>%</td>
                                        <td>S√≠</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="3">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="3">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-indicador-id="4">
                                        <td><strong>Tasa de Crecimiento Financiero</strong></td>
                                        <td>Rentabilidad de Inversiones</td>
                                        <td>SP_CALC_CREC_FIN</td>
                                        <td>%</td>
                                        <td>S√≠</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="4">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="4">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-indicador-id="5">
                                        <td><strong>Reducci√≥n de Costos Operativos</strong></td>
                                        <td>Gesti√≥n de Costos Operativos</td>
                                        <td>SP_CALC_RED_COSTOS</td>
                                        <td>%</td>
                                        <td>S√≠</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="5">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="5">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-indicador-id="6">
                                        <td><strong>Eficiencia de Gastos por Estudiante</strong></td>
                                        <td>Gesti√≥n de Costos Operativos</td>
                                        <td>SP_CALC_EFI_GASTO</td>
                                        <td>$</td>
                                        <td>S√≠</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="6">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="6">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-indicador-id="7">
                                        <td><strong>Tiempo de Procesamiento de Solicitudes</strong></td>
                                        <td>Mejora de Procesos de Solicitud</td>
                                        <td>SP_CALC_TIEMPO_PROC</td>
                                        <td>D√≠as</td>
                                        <td>S√≠</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="7">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="7">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-indicador-id="8">
                                        <td><strong>Satisfacci√≥n de Usuarios</strong></td>
                                        <td>Calidad de Servicios</td>
                                        <td>SP_CALC_SATISF_USU</td>
                                        <td>Escala</td>
                                        <td>S√≠</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="8">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="8">Eliminar</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div id="cmi-metas-view" class="view">
                <div class="view-header">
                    <div>
                        <h1>Configurar Metas</h1>
                        <p class="text-muted">Gesti√≥n de metas del Cuadro de Mando Integral (CMI)</p>
                    </div>
                    <button class="btn btn-primary" id="btnNuevaMeta">Definir Nueva Meta</button>
                </div>

                <!-- Modal/Formulario para crear/editar metas -->
                <div id="modalMeta" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Nueva Meta</h2>
                            <button class="btn-close" id="btnCerrarModalMeta">&times;</button>
                        </div>
                        <form id="formMeta" class="modal-body">
                            <input type="hidden" id="id_meta">
                            
                            <div class="form-group">
                                <label for="selectIndicadorMeta">Indicador</label>
                                <select id="selectIndicadorMeta" name="selectIndicadorMeta" required>
                                    <option value="">Selecciona un indicador...</option>
                                    <option value="1">Porcentaje de Ejecuci√≥n Presupuestaria</option>
                                    <option value="2">Variaci√≥n Presupuestaria</option>
                                    <option value="3">ROI - Retorno sobre Inversi√≥n</option>
                                    <option value="4">Tasa de Crecimiento Financiero</option>
                                    <option value="5">Reducci√≥n de Costos Operativos</option>
                                    <option value="6">Eficiencia de Gastos por Estudiante</option>
                                    <option value="7">√çndice de Productividad</option>
                                    <option value="8">Ratio Gastos Administrativos</option>
                                    <option value="9">Tiempo de Procesamiento de Solicitudes</option>
                                    <option value="10">Tasa de Rechazo de Solicitudes Incompletas</option>
                                    <option value="11">Satisfacci√≥n de Usuarios</option>
                                    <option value="12">Disponibilidad del Sistema</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="selectPeriodoMeta">Per√≠odo de Aplicaci√≥n</label>
                                <select id="selectPeriodoMeta" name="selectPeriodoMeta" required>
                                    <option value="">Selecciona un per√≠odo...</option>
                                    <option value="2025-1">2025 - Ciclo I</option>
                                    <option value="2025-2">2025 - Ciclo II</option>
                                    <option value="2024-3">2024 - Ciclo III</option>
                                    <option value="2024-2">2024 - Ciclo II</option>
                                    <option value="2024-1">2024 - Ciclo I</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="valorMeta">Valor Meta (Target)</label>
                                <input type="number" id="valorMeta" name="valorMeta" step="0.01" required placeholder="Ej: 85.50">
                            </div>

                            <div class="form-group">
                                <label for="fechaVigenciaMeta">Fecha de Fin de Vigencia</label>
                                <input type="date" id="fechaVigenciaMeta" name="fechaVigenciaMeta">
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" id="btnCancelarMeta">Cancelar</button>
                                <button type="submit" class="btn btn-primary" id="btnGuardarMeta">Guardar</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Tabla de metas existentes -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="tablaMetas" class="table">
                                <thead>
                                    <tr>
                                        <th>Indicador</th>
                                        <th>Per√≠odo</th>
                                        <th>Valor Meta</th>
                                        <th>Vigencia</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data de metas de ejemplo -->
                                    <tr data-meta-id="1">
                                        <td><strong>Porcentaje de Ejecuci√≥n Presupuestaria</strong></td>
                                        <td>2024 - Ciclo I</td>
                                        <td>85%</td>
                                        <td>2024-12-31</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-meta" data-id="1">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-meta" data-id="1">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-meta-id="2">
                                        <td><strong>Variaci√≥n Presupuestaria</strong></td>
                                        <td>2024 - Ciclo I</td>
                                        <td>5%</td>
                                        <td>2024-12-31</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-meta" data-id="2">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-meta" data-id="2">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-meta-id="3">
                                        <td><strong>ROI - Retorno sobre Inversi√≥n</strong></td>
                                        <td>2024 - Ciclo I</td>
                                        <td>12%</td>
                                        <td>2024-12-31</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-meta" data-id="3">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-meta" data-id="3">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-meta-id="4">
                                        <td><strong>Tasa de Crecimiento Financiero</strong></td>
                                        <td>2024 - Ciclo I</td>
                                        <td>8%</td>
                                        <td>2024-12-31</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-meta" data-id="4">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-meta" data-id="4">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-meta-id="5">
                                        <td><strong>Satisfacci√≥n de Usuarios</strong></td>
                                        <td>2024 - Ciclo I</td>
                                        <td>4.5</td>
                                        <td>2024-12-31</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-meta" data-id="5">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-meta" data-id="5">Eliminar</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>


            <div id="cmi-acciones-view" class="view">
                <div class="view-header">
                    <div>
                        <h1>Configurar Acciones Estrat√©gicas</h1>
                        <p class="text-muted">Gesti√≥n de acciones estrat√©gicas del Cuadro de Mando Integral (CMI)</p>
                    </div>
                    <button class="btn btn-primary" id="btnNuevaAccion">Crear Nueva Acci√≥n</button>
                </div>

                <!-- Modal/Formulario para crear/editar acciones -->
                <div id="modalAccion" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Nueva Acci√≥n Estrat√©gica</h2>
                            <button class="btn-close" id="btnCerrarModalAccion">&times;</button>
                        </div>
                        <form id="formAccion" class="modal-body">
                            <input type="hidden" id="id_accion">
                            
                            <div class="form-group">
                                <label for="selectObjetivoAccion">Objetivo Asociado</label>
                                <select id="selectObjetivoAccion" name="selectObjetivoAccion" required>
                                    <option value="">Selecciona un objetivo...</option>
                                    <option value="1">Mejorar Presupuestaci√≥n Eficiente</option>
                                    <option value="2">Optimizar Procesos Administrativos</option>
                                    <option value="3">Incrementar Satisfacci√≥n de Usuarios</option>
                                    <option value="4">Fortalecer Infraestructura Tecnol√≥gica</option>
                                    <option value="5">Desarrollar Talento Humano</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="descripcionAccion">Descripci√≥n de la Acci√≥n</label>
                                <textarea id="descripcionAccion" name="descripcionAccion" rows="3" required placeholder="Describe la acci√≥n estrat√©gica..."></textarea>
                            </div>

                            <div class="form-group">
                                <label for="responsableRol">Rol Responsable</label>
                                <input type="text" id="responsableRol" name="responsableRol" placeholder="Ej: Director de Finanzas">
                            </div>

                            <div class="form-group">
                                <label for="fechaInicioAccion">Fecha de Inicio</label>
                                <input type="date" id="fechaInicioAccion" name="fechaInicioAccion">
                            </div>

                            <div class="form-group">
                                <label for="fechaFinAccion">Fecha Fin Prevista</label>
                                <input type="date" id="fechaFinAccion" name="fechaFinAccion">
                            </div>

                            <div class="form-group">
                                <label for="selectEstadoAccion">Estado</label>
                                <select id="selectEstadoAccion" name="selectEstadoAccion" required>
                                    <option value="">Selecciona un estado...</option>
                                    <option value="Pendiente">Pendiente</option>
                                    <option value="En Progreso">En Progreso</option>
                                    <option value="Completada">Completada</option>
                                </select>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" id="btnCancelarAccion">Cancelar</button>
                                <button type="submit" class="btn btn-primary" id="btnGuardarAccion">Guardar</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Tabla de acciones existentes -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="tablaAcciones" class="table">
                                <thead>
                                    <tr>
                                        <th>Acci√≥n (Descripci√≥n)</th>
                                        <th>Objetivo</th>
                                        <th>Responsable</th>
                                        <th>Estado</th>
                                        <th>Fechas</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data de acciones de ejemplo -->
                                    <tr data-accion-id="1">
                                        <td><strong>Implementar nuevo sistema de presupuestaci√≥n</strong></td>
                                        <td>Mejorar Presupuestaci√≥n Eficiente</td>
                                        <td>Director de Finanzas</td>
                                        <td><span class="badge badge-warning">En Progreso</span></td>
                                        <td>2025-01-15 - 2025-03-31</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-accion" data-id="1">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-accion" data-id="1">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-accion-id="2">
                                        <td><strong>Automatizar procesos de solicitudes</strong></td>
                                        <td>Optimizar Procesos Administrativos</td>
                                        <td>Jefe de Sistemas</td>
                                        <td><span class="badge badge-success">Completada</span></td>
                                        <td>2024-11-01 - 2024-12-20</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-accion" data-id="2">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-accion" data-id="2">Eliminar</button>
                                        </td>
                                    </tr>
                                    <tr data-accion-id="3">
                                        <td><strong>Encuesta de satisfacci√≥n a usuarios</strong></td>
                                        <td>Incrementar Satisfacci√≥n de Usuarios</td>
                                        <td>Coordinador de Calidad</td>
                                        <td><span class="badge badge-info">Pendiente</span></td>
                                        <td>2025-02-01 - 2025-02-28</td>
                                        <td>
                                            <button class="btn btn-sm btn-secondary btn-editar-accion" data-id="3">Editar</button>
                                            <button class="btn btn-sm btn-danger btn-eliminar-accion" data-id="3">Eliminar</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

    <script>
    // Funci√≥n para cerrar sesi√≥n
    function cerrarSesion() {
        if (confirm('¬øSeguro que deseas cerrar sesi√≥n?')) {
            sessionStorage.clear();
            window.location.href = 'index.html';
        }
    }
    
        document.addEventListener('DOMContentLoaded', function() {
        // Manejar click en items de navegaci√≥n
        const navItems = document.querySelectorAll('.nav-item');
        const views = document.querySelectorAll('.view');

        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                // Si es un submenu, expandir/contraer
                if (this.classList.contains('nav-submenu')) {
                    e.preventDefault();
                    this.classList.toggle('open');
                    return;
                }

                // Si es un subitem del submenu
                if (this.classList.contains('nav-subitem')) {
                    e.preventDefault();
                    const viewName = this.getAttribute('data-view');
                    showView(viewName);
                    
                    // Actualizar activos
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    return;
                }

                // Items normales de navegaci√≥n
                e.preventDefault();
                const viewName = this.getAttribute('data-view');
                
                if (!viewName) return;

                // Mostrar la vista correspondiente
                showView(viewName);

                // Actualizar item activo
                navItems.forEach(nav => {
                    nav.classList.remove('active');
                });
                this.classList.add('active');
            });
        });

        function showView(viewName) {
            // Ocultar todas las vistas
            views.forEach(view => view.classList.remove('active'));

            // Mostrar la vista solicitada
            const view = document.getElementById(viewName + '-view');
            if (view) {
                view.classList.add('active');
            }
        }

        // Cerrar sidebar en m√≥vil al hacer click en un item
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const sidebar = document.getElementById('sidebar');

        if (mobileMenuToggle) {
            mobileMenuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('open');
            });
        }

        function togglePerspectiva(headerElement) {
            const perspectiva = headerElement.closest('.perspectiva');
            perspectiva.classList.toggle('expanded');
            
            const toggle = headerElement.querySelector('.perspectiva-toggle');
            toggle.textContent = perspectiva.classList.contains('expanded') ? '‚ñº' : '‚ñ∂';
        }

        function toggleObjetivo(headerElement) {
            const objetivo = headerElement.closest('.objetivo');
            objetivo.classList.toggle('expanded');
            
            const toggle = headerElement.querySelector('.objetivo-toggle');
            toggle.textContent = objetivo.classList.contains('expanded') ? '‚ñº' : '‚ñ∂';
        }

        // Load data when filter is applied
        document.getElementById('btnAplicarFiltro')?.addEventListener('click', function() {
            const periodo = document.getElementById('filtroPeriodo').value;
            console.log('Cargando datos para el per√≠odo:', periodo);
            // Here you would load data from the server
        });

        // --- CMI Perspectives View Logic ---

        const modalPerspectiva = document.getElementById('modalPerspectiva');
        const btnNuevaPerspectiva = document.getElementById('btnNuevaPerspectiva');
        const btnCerrarModal = document.getElementById('btnCerrarModal');
        const btnCancelarPerspectiva = document.getElementById('btnCancelarPerspectiva');
        const formPerspectiva = document.getElementById('formPerspectiva');
        const idPerspectivaInput = document.getElementById('id_perspectiva');
        const nombrePerspectivaInput = document.getElementById('nombrePerspectiva');
        const descripcionPerspectivaInput = document.getElementById('descripcionPerspectiva');
        const tablaPerspectivasBody = document.querySelector('#tablaPerspectivas tbody');

        // Function to open modal for adding a new perspective
        btnNuevaPerspectiva.addEventListener('click', () => {
            formPerspectiva.reset();
            idPerspectivaInput.value = '';
            modalPerspectiva.style.display = 'flex';
            document.querySelector('#modalPerspectiva h2').textContent = 'Nueva Perspectiva';
        });

        // Function to close modal
        const closeModal = () => {
            modalPerspectiva.style.display = 'none';
        };

        btnCerrarModal.addEventListener('click', closeModal);
        btnCancelarPerspectiva.addEventListener('click', closeModal);

        // Handle form submission (add/edit perspective)
        formPerspectiva.addEventListener('submit', (e) => {
            e.preventDefault();

            const id = idPerspectivaInput.value;
            const nombre = nombrePerspectivaInput.value;
            const descripcion = descripcionPerspectivaInput.value;

            if (id) {
                // Edit existing perspective
                const row = tablaPerspectivasBody.querySelector(`tr[data-perspectiva-id="${id}"]`);
                row.querySelector('td:nth-child(1) strong').textContent = nombre;
                row.querySelector('td:nth-child(2)').textContent = descripcion;
                row.querySelector('.btn-editar').dataset.id = id; // Ensure data-id is updated if needed
                row.querySelector('.btn-eliminar').dataset.id = id;
            } else {
                // Add new perspective
                const newId = Date.now(); // Simple way to generate a unique ID
                const newRow = `
                    <tr data-perspectiva-id="${newId}">
                        <td><strong>${nombre}</strong></td>
                        <td>${descripcion}</td>
                        <td>
                            <button class="btn btn-sm btn-secondary btn-editar" data-id="${newId}">Editar</button>
                            <button class="btn btn-sm btn-danger btn-eliminar" data-id="${newId}">Eliminar</button>
                        </td>
                    </tr>
                `;
                tablaPerspectivasBody.insertAdjacentHTML('beforeend', newRow);
            }

            closeModal();
        });

        // Event delegation for edit and delete buttons
        tablaPerspectivasBody.addEventListener('click', (e) => {
            const target = e.target;

            if (target.classList.contains('btn-editar')) {
                const id = target.dataset.id;
                const row = target.closest('tr');
                const nombre = row.querySelector('td:nth-child(1) strong').textContent;
                const descripcion = row.querySelector('td:nth-child(2)').textContent;

                idPerspectivaInput.value = id;
                nombrePerspectivaInput.value = nombre;
                descripcionPerspectivaInput.value = descripcion;
                modalPerspectiva.style.display = 'flex';
                document.querySelector('#modalPerspectiva h2').textContent = 'Editar Perspectiva';
            } else if (target.classList.contains('btn-eliminar')) {
                if (confirm('¬øEst√°s seguro de que deseas eliminar esta perspectiva?')) {
                    const id = target.dataset.id;
                    target.closest('tr').remove();
                }
            }
        });

        // --- CMI Objectives View Logic ---
        const modalObjetivo = document.getElementById('modalObjetivo');
        const btnNuevoObjetivo = document.getElementById('btnNuevoObjetivo');
        const btnCerrarModalObjetivo = document.getElementById('btnCerrarModalObjetivo');
        const btnCancelarObjetivo = document.getElementById('btnCancelarObjetivo');
        const formObjetivo = document.getElementById('formObjetivo');
        const idObjetivoInput = document.getElementById('id_objetivo');
        const selectPerspectivaObjetivo = document.getElementById('selectPerspectivaObjetivo');
        const nombreObjetivoInput = document.getElementById('nombreObjetivo');
        const descripcionObjetivoInput = document.getElementById('descripcionObjetivo');
        const tablaObjetivosBody = document.querySelector('#tablaObjetivos tbody');

        // Function to open modal for adding a new objective
        btnNuevoObjetivo.addEventListener('click', () => {
            formObjetivo.reset();
            idObjetivoInput.value = '';
            modalObjetivo.style.display = 'flex';
            document.querySelector('#modalObjetivo h2').textContent = 'Nuevo Objetivo';
        });

        // Function to close objective modal
        const closeModalObjetivo = () => {
            modalObjetivo.style.display = 'none';
        };

        btnCerrarModalObjetivo.addEventListener('click', closeModalObjetivo);
        btnCancelarObjetivo.addEventListener('click', closeModalObjetivo);

        // Handle form submission (add/edit objective)
        formObjetivo.addEventListener('submit', (e) => {
            e.preventDefault();

            const id = idObjetivoInput.value;
            const perspectivaId = selectPerspectivaObjetivo.value;
            const nombre = nombreObjetivoInput.value;
            const descripcion = descripcionObjetivoInput.value;

            // Get perspective name from selected option
            const perspectivaName = selectPerspectivaObjetivo.options[selectPerspectivaObjetivo.selectedIndex].text;

            if (id) {
                // Edit existing objective
                const row = tablaObjetivosBody.querySelector(`tr[data-objetivo-id="${id}"]`);
                row.querySelector('td:nth-child(1) strong').textContent = nombre;
                row.querySelector('td:nth-child(2)').textContent = descripcion;
                row.querySelector('td:nth-child(3)').textContent = perspectivaName;
                row.querySelector('.btn-editar-objetivo').dataset.id = id;
                row.querySelector('.btn-eliminar-objetivo').dataset.id = id;
            } else {
                // Add new objective
                const newId = Date.now(); // Simple way to generate a unique ID
                const newRow = `
                    <tr data-objetivo-id="${newId}">
                        <td><strong>${nombre}</strong></td>
                        <td>${descripcion}</td>
                        <td>${perspectivaName}</td>
                        <td>
                            <button class="btn btn-sm btn-secondary btn-editar-objetivo" data-id="${newId}">Editar</button>
                            <button class="btn btn-sm btn-danger btn-eliminar-objetivo" data-id="${newId}">Eliminar</button>
                        </td>
                    </tr>
                `;
                tablaObjetivosBody.insertAdjacentHTML('beforeend', newRow);
            }

            closeModalObjetivo();
        });

        // Event delegation for edit and delete objective buttons
        tablaObjetivosBody.addEventListener('click', (e) => {
            const target = e.target;

            if (target.classList.contains('btn-editar-objetivo')) {
                const id = target.dataset.id;
                const row = target.closest('tr');
                const nombre = row.querySelector('td:nth-child(1) strong').textContent;
                const descripcion = row.querySelector('td:nth-child(2)').textContent;
                const perspectiva = row.querySelector('td:nth-child(3)').textContent;

                idObjetivoInput.value = id;
                nombreObjetivoInput.value = nombre;
                descripcionObjetivoInput.value = descripcion;

                // Set the selected option for perspective
                const option = Array.from(selectPerspectivaObjetivo.options).find(opt => opt.text === perspectiva);
                if (option) {
                    selectPerspectivaObjetivo.value = option.value;
                }

                modalObjetivo.style.display = 'flex';
                document.querySelector('#modalObjetivo h2').textContent = 'Editar Objetivo';
            } else if (target.classList.contains('btn-eliminar-objetivo')) {
                if (confirm('¬øEst√°s seguro de que deseas eliminar este objetivo?')) {
                    const id = target.dataset.id;
                    target.closest('tr').remove();
                }
            }
        });

        // --- CMI Indicators View Logic ---
        const modalIndicador = document.getElementById('modalIndicador');
        const btnNuevoIndicador = document.getElementById('btnNuevoIndicador');
        const btnCerrarModalIndicador = document.getElementById('btnCerrarModalIndicador');
        const btnCancelarIndicador = document.getElementById('btnCancelarIndicador');
        const formIndicador = document.getElementById('formIndicador');
        const idIndicadorInput = document.getElementById('id_indicador');
        const selectObjetivoIndicador = document.getElementById('selectObjetivoIndicador');
        const nombreIndicadorInput = document.getElementById('nombreIndicador');
        const formulaSpNombreInput = document.getElementById('formulaSpNombre');
        const unidadMedidaInput = document.getElementById('unidadMedida');
        const activoIndicadorInput = document.getElementById('activoIndicador');
        const tablaIndicadoresBody = document.querySelector('#tablaIndicadores tbody');

        // Function to open modal for adding a new indicator
        btnNuevoIndicador.addEventListener('click', () => {
            formIndicador.reset();
            idIndicadorInput.value = '';
            activoIndicadorInput.checked = true; // Set default to checked
            modalIndicador.style.display = 'flex';
            document.querySelector('#modalIndicador h2').textContent = 'Nuevo Indicador';
        });

        // Function to close indicator modal
        const closeModalIndicador = () => {
            modalIndicador.style.display = 'none';
        };

        btnCerrarModalIndicador.addEventListener('click', closeModalIndicador);
        btnCancelarIndicador.addEventListener('click', closeModalIndicador);

        // Handle form submission (add/edit indicator)
        formIndicador.addEventListener('submit', (e) => {
            e.preventDefault();

            const id = idIndicadorInput.value;
            const objetivoId = selectObjetivoIndicador.value;
            const nombre = nombreIndicadorInput.value;
            const formulaSp = formulaSpNombreInput.value;
            const unidad = unidadMedidaInput.value;
            const activo = activoIndicadorInput.checked ? 'S√≠' : 'No';

            // Get objective name from selected option
            const objetivoName = selectObjetivoIndicador.options[selectObjetivoIndicador.selectedIndex].text;

            if (id) {
                // Edit existing indicator
                const row = tablaIndicadoresBody.querySelector(`tr[data-indicador-id="${id}"]`);
                row.querySelector('td:nth-child(1) strong').textContent = nombre;
                row.querySelector('td:nth-child(2)').textContent = objetivoName;
                row.querySelector('td:nth-child(3)').textContent = formulaSp;
                row.querySelector('td:nth-child(4)').textContent = unidad;
                row.querySelector('td:nth-child(5)').textContent = activo;
                row.querySelector('.btn-editar-indicador').dataset.id = id;
                row.querySelector('.btn-eliminar-indicador').dataset.id = id;
            } else {
                // Add new indicator
                const newId = Date.now();
                const newRow = `
                    <tr data-indicador-id="${newId}">
                        <td><strong>${nombre}</strong></td>
                        <td>${objetivoName}</td>
                        <td>${formulaSp}</td>
                        <td>${unidad}</td>
                        <td>${activo}</td>
                        <td>
                            <button class="btn btn-sm btn-secondary btn-editar-indicador" data-id="${newId}">Editar</button>
                            <button class="btn btn-sm btn-danger btn-eliminar-indicador" data-id="${newId}">Eliminar</button>
                        </td>
                    </tr>
                `;
                tablaIndicadoresBody.insertAdjacentHTML('beforeend', newRow);
            }

            closeModalIndicador();
        });

        // Event delegation for edit and delete indicator buttons
        tablaIndicadoresBody.addEventListener('click', (e) => {
            const target = e.target;

            if (target.classList.contains('btn-editar-indicador')) {
                const id = target.dataset.id;
                const row = target.closest('tr');
                const nombre = row.querySelector('td:nth-child(1) strong').textContent;
                const objetivo = row.querySelector('td:nth-child(2)').textContent;
                const formulaSp = row.querySelector('td:nth-child(3)').textContent;
                const unidad = row.querySelector('td:nth-child(4)').textContent;
                const activo = row.querySelector('td:nth-child(5)').textContent;

                idIndicadorInput.value = id;
                nombreIndicadorInput.value = nombre;
                formulaSpNombreInput.value = formulaSp;
                unidadMedidaInput.value = unidad;
                activoIndicadorInput.checked = activo === 'S√≠';

                // Set the selected option for objetivo
                const option = Array.from(selectObjetivoIndicador.options).find(opt => opt.text === objetivo);
                if (option) {
                    selectObjetivoIndicador.value = option.value;
                }

                modalIndicador.style.display = 'flex';
                document.querySelector('#modalIndicador h2').textContent = 'Editar Indicador';
            } else if (target.classList.contains('btn-eliminar-indicador')) {
                if (confirm('¬øEst√°s seguro de que deseas eliminar este indicador?')) {
                    const id = target.dataset.id;
                    target.closest('tr').remove();
                }
            }
        });

            // --- CMI Metas View Logic ---
        const modalMeta = document.getElementById('modalMeta');
        const btnNuevaMeta = document.getElementById('btnNuevaMeta');
        const btnCerrarModalMeta = document.getElementById('btnCerrarModalMeta');
        const btnCancelarMeta = document.getElementById('btnCancelarMeta');
        const formMeta = document.getElementById('formMeta');
        const idMetaInput = document.getElementById('id_meta');
        const selectIndicadorMeta = document.getElementById('selectIndicadorMeta');
        const selectPeriodoMeta = document.getElementById('selectPeriodoMeta');
        const valorMetaInput = document.getElementById('valorMeta');
        const fechaVigenciaMetaInput = document.getElementById('fechaVigenciaMeta');
        const tablaMetasBody = document.querySelector('#tablaMetas tbody');

        if (!btnNuevaMeta || !modalMeta || !formMeta || !tablaMetasBody) {
            console.log('[v0] Error: Elementos de metas no encontrados en el DOM');
            return;
        }

        console.log('[v0] Elementos de metas encontrados correctamente');

        // Function to open modal for adding a new meta
        btnNuevaMeta.addEventListener('click', () => {
            console.log('[v0] Bot√≥n Nueva Meta clickeado');
            formMeta.reset();
            idMetaInput.value = '';
            modalMeta.style.display = 'flex';
            document.querySelector('#modalMeta h2').textContent = 'Nueva Meta';
        });

        // Function to close modal
        const closeModalMeta = () => {
            console.log('[v0] Cerrando modal de Metas');
            modalMeta.style.display = 'none';
        };

        if (btnCerrarModalMeta) {
            btnCerrarModalMeta.addEventListener('click', closeModalMeta);
        }
        
        if (btnCancelarMeta) {
            btnCancelarMeta.addEventListener('click', closeModalMeta);
        }

        formMeta.addEventListener('submit', (e) => {
            e.preventDefault();
            console.log('[v0] Formulario de metas enviado');

            const id = idMetaInput.value;
            const indicadorId = selectIndicadorMeta.value;
            const periodoId = selectPeriodoMeta.value;
            const valor = valorMetaInput.value;
            const vigencia = fechaVigenciaMetaInput.value;

            // Validar que los campos requeridos est√©n llenos
            if (!indicadorId || !periodoId || !valor) {
                alert('Por favor completa todos los campos requeridos');
                return;
            }

            // Get indicator name from selected option
            const indicadorName = selectIndicadorMeta.options[selectIndicadorMeta.selectedIndex].text;
            // Get period name from selected option
            const periodoName = selectPeriodoMeta.options[selectPeriodoMeta.selectedIndex].text;

            if (id) {
                // Edit existing meta
                console.log('[v0] Editando meta con ID:', id);
                const row = tablaMetasBody.querySelector(`tr[data-meta-id="${id}"]`);
                if (row) {
                    row.querySelector('td:nth-child(1) strong').textContent = indicadorName;
                    row.querySelector('td:nth-child(2)').textContent = periodoName;
                    row.querySelector('td:nth-child(3)').textContent = valor;
                    row.querySelector('td:nth-child(4)').textContent = vigencia;
                    row.querySelector('.btn-editar-meta').dataset.id = id;
                    row.querySelector('.btn-eliminar-meta').dataset.id = id;
                }
            } else {
                // Add new meta
                console.log('[v0] Agregando nueva meta');
                const newId = Date.now(); // Simple way to generate a unique ID
                const newRow = `
                    <tr data-meta-id="${newId}">
                        <td><strong>${indicadorName}</strong></td>
                        <td>${periodoName}</td>
                        <td>${valor}</td>
                        <td>${vigencia || '-'}</td>
                        <td>
                            <button class="btn btn-sm btn-secondary btn-editar-meta" data-id="${newId}">Editar</button>
                            <button class="btn btn-sm btn-danger btn-eliminar-meta" data-id="${newId}">Eliminar</button>
                        </td>
                    </tr>
                `;
                tablaMetasBody.insertAdjacentHTML('beforeend', newRow);
            }

            closeModalMeta();
        });

        tablaMetasBody.addEventListener('click', (e) => {
            const target = e.target;

            if (target.classList.contains('btn-editar-meta')) {
                console.log('[v0] Bot√≥n editar clickeado');
                const id = target.dataset.id;
                const row = target.closest('tr');
                
                if (!row) return;
                
                const indicador = row.querySelector('td:nth-child(1) strong').textContent;
                const periodo = row.querySelector('td:nth-child(2)').textContent;
                const valor = row.querySelector('td:nth-child(3)').textContent;
                const vigencia = row.querySelector('td:nth-child(4)').textContent;

                idMetaInput.value = id;
                valorMetaInput.value = valor;
                fechaVigenciaMetaInput.value = vigencia !== '-' ? vigencia : '';

                // Set the selected option for indicador
                const optionIndicador = Array.from(selectIndicadorMeta.options).find(opt => opt.text === indicador);
                if (optionIndicador) {
                    selectIndicadorMeta.value = optionIndicador.value;
                }

                // Set the selected option for periodo
                const optionPeriodo = Array.from(selectPeriodoMeta.options).find(opt => opt.text === periodo);
                if (optionPeriodo) {
                    selectPeriodoMeta.value = optionPeriodo.value;
                }

                modalMeta.style.display = 'flex';
                document.querySelector('#modalMeta h2').textContent = 'Editar Meta';
            } else if (target.classList.contains('btn-eliminar-meta')) {
                console.log('[v0] Bot√≥n eliminar clickeado');
                if (confirm('¬øEst√°s seguro de que deseas eliminar esta meta?')) {
                    const id = target.dataset.id;
                    target.closest('tr').remove();
                    console.log('[v0] Meta eliminada con ID:', id);
                }
            }
        });

            // --- CMI Acciones (Strategic Actions) View Logic ---
        const modalAccion = document.getElementById('modalAccion');
        const btnNuevaAccion = document.getElementById('btnNuevaAccion');
        const btnCerrarModalAccion = document.getElementById('btnCerrarModalAccion');
        const btnCancelarAccion = document.getElementById('btnCancelarAccion');
        const formAccion = document.getElementById('formAccion');
        const idAccionInput = document.getElementById('id_accion');
        const selectObjetivoAccion = document.getElementById('selectObjetivoAccion');
        const descripcionAccionInput = document.getElementById('descripcionAccion');
        const responsableRolInput = document.getElementById('responsableRol');
        const fechaInicioAccionInput = document.getElementById('fechaInicioAccion');
        const fechaFinAccionInput = document.getElementById('fechaFinAccion');
        const selectEstadoAccion = document.getElementById('selectEstadoAccion');
        const tablaAccionesBody = document.querySelector('#tablaAcciones tbody');

        if (btnNuevaAccion && modalAccion && formAccion && tablaAccionesBody) {
            console.log('[v0] Elementos de acciones encontrados correctamente');

            // Function to open modal for adding a new action
            btnNuevaAccion.addEventListener('click', () => {
                console.log('[v0] Bot√≥n Nueva Acci√≥n clickeado');
                formAccion.reset();
                idAccionInput.value = '';
                modalAccion.style.display = 'flex';
                document.querySelector('#modalAccion h2').textContent = 'Nueva Acci√≥n Estrat√©gica';
            });

            // Function to close modal
            const closeModalAccion = () => {
                console.log('[v0] Cerrando modal de Acciones');
                modalAccion.style.display = 'none';
            };

            if (btnCerrarModalAccion) {
                btnCerrarModalAccion.addEventListener('click', closeModalAccion);
            }
            
            if (btnCancelarAccion) {
                btnCancelarAccion.addEventListener('click', closeModalAccion);
            }

            formAccion.addEventListener('submit', (e) => {
                e.preventDefault();
                console.log('[v0] Formulario de acciones enviado');

                const id = idAccionInput.value;
                const objetivo = selectObjetivoAccion.value;
                const descripcion = descripcionAccionInput.value;
                const responsable = responsableRolInput.value;
                const fechaInicio = fechaInicioAccionInput.value;
                const fechaFin = fechaFinAccionInput.value;
                const estado = selectEstadoAccion.value;

                // Validar que los campos requeridos est√©n llenos
                if (!objetivo || !descripcion || !estado) {
                    alert('Por favor completa los campos requeridos: Objetivo, Descripci√≥n y Estado');
                    return;
                }

                // Get objective name from selected option
                const objetivoName = selectObjetivoAccion.options[selectObjetivoAccion.selectedIndex].text;
                
                // Function to get badge class based on estado
                const getEstadoBadgeClass = (estado) => {
                    switch(estado) {
                        case 'Pendiente': return 'badge-info';
                        case 'En Progreso': return 'badge-warning';
                        case 'Completada': return 'badge-success';
                        default: return 'badge-secondary';
                    }
                };

                // Format dates for display
                const fechasDisplay = fechaInicio && fechaFin ? `${fechaInicio} - ${fechaFin}` : (fechaInicio || '-');

                if (id) {
                    // Edit existing action
                    console.log('[v0] Editando acci√≥n con ID:', id);
                    const row = tablaAccionesBody.querySelector(`tr[data-accion-id="${id}"]`);
                    if (row) {
                        row.querySelector('td:nth-child(1) strong').textContent = descripcion;
                        row.querySelector('td:nth-child(2)').textContent = objetivoName;
                        row.querySelector('td:nth-child(3)').textContent = responsable || '-';
                        row.querySelector('td:nth-child(4) .badge').textContent = estado;
                        row.querySelector('td:nth-child(4) .badge').className = `badge ${getEstadoBadgeClass(estado)}`;
                        row.querySelector('td:nth-child(5)').textContent = fechasDisplay;
                        row.querySelector('.btn-editar-accion').dataset.id = id;
                        row.querySelector('.btn-eliminar-accion').dataset.id = id;
                    }
                } else {
                    // Add new action
                    console.log('[v0] Agregando nueva acci√≥n');
                    const newId = Date.now(); // Simple way to generate a unique ID
                    const newRow = `
                        <tr data-accion-id="${newId}">
                            <td><strong>${descripcion}</strong></td>
                            <td>${objetivoName}</td>
                            <td>${responsable || '-'}</td>
                            <td><span class="badge ${getEstadoBadgeClass(estado)}">${estado}</span></td>
                            <td>${fechasDisplay}</td>
                            <td>
                                <button class="btn btn-sm btn-secondary btn-editar-accion" data-id="${newId}">Editar</button>
                                <button class="btn btn-sm btn-danger btn-eliminar-accion" data-id="${newId}">Eliminar</button>
                            </td>
                        </tr>
                    `;
                    tablaAccionesBody.insertAdjacentHTML('beforeend', newRow);
                }

                closeModalAccion();
            });

            tablaAccionesBody.addEventListener('click', (e) => {
                const target = e.target;

                if (target.classList.contains('btn-editar-accion')) {
                    console.log('[v0] Bot√≥n editar acci√≥n clickeado');
                    const id = target.dataset.id;
                    const row = target.closest('tr');
                    
                    if (!row) return;
                    
                    const descripcion = row.querySelector('td:nth-child(1) strong').textContent;
                    const objetivo = row.querySelector('td:nth-child(2)').textContent;
                    const responsable = row.querySelector('td:nth-child(3)').textContent;
                    const estado = row.querySelector('td:nth-child(4) .badge').textContent;
                    const fechasText = row.querySelector('td:nth-child(5)').textContent;

                    // Parse dates
                    const fechasArray = fechasText.split(' - ');
                    const fechaInicio = fechasArray[0] ? fechasArray[0].trim() : '';
                    const fechaFin = fechasArray[1] ? fechasArray[1].trim() : '';

                    idAccionInput.value = id;
                    descripcionAccionInput.value = descripcion;
                    responsableRolInput.value = responsable !== '-' ? responsable : '';
                    fechaInicioAccionInput.value = fechaInicio;
                    fechaFinAccionInput.value = fechaFin;
                    selectEstadoAccion.value = estado;

                    // Set the selected option for objetivo
                    const optionObjetivo = Array.from(selectObjetivoAccion.options).find(opt => opt.text === objetivo);
                    if (optionObjetivo) {
                        selectObjetivoAccion.value = optionObjetivo.value;
                    }

                    modalAccion.style.display = 'flex';
                    document.querySelector('#modalAccion h2').textContent = 'Editar Acci√≥n Estrat√©gica';
                } else if (target.classList.contains('btn-eliminar-accion')) {
                    console.log('[v0] Bot√≥n eliminar acci√≥n clickeado');
                    if (confirm('¬øEst√°s seguro de que deseas eliminar esta acci√≥n?')) {
                        const id = target.dataset.id;
                        target.closest('tr').remove();
                        console.log('[v0] Acci√≥n eliminada con ID:', id);
                    }
                }
            });
        } else {console.log('El asunto es no dejar un else sin qu√© hacer...');}});

    // Dashboard CMI Variables
    const dashboardCMI = document.getElementById('dashboardCMI');
    const filterPeriodo = document.getElementById('filterPeriodo');
    const filterEstado = document.getElementById('filterEstado');
    const btnExportarDatos = document.getElementById('btnExportarDatos');
    const btnRefrescarDatos = document.getElementById('btnRefrescarDatos');

    if (dashboardCMI && filterPeriodo && filterEstado) {
        console.log('[v0] Elementos del Dashboard CMI encontrados');

        // Toggle perspectivas
        document.querySelectorAll('.perspectiva-header').forEach(header => {
            header.addEventListener('click', (e) => {
                const perspectiva = header.closest('.perspectiva');
                perspectiva.classList.toggle('expanded');
                console.log('[v0] Perspectiva toggled:', perspectiva.dataset.perspectiva);
            });
        });

        // Toggle objetivos
        document.querySelectorAll('.objetivo-header').forEach(header => {
            header.addEventListener('click', (e) => {
                if (e.target.closest('.objetivo-toggle')) {
                    const objetivo = header.closest('.objetivo');
                    objetivo.classList.toggle('expanded');
                    console.log('[v0] Objetivo toggled:', objetivo.dataset.objetivo);
                }
            });
        });

        // Expandir todas las perspectivas por defecto
        document.querySelectorAll('.perspectiva').forEach(p => {
            p.classList.add('expanded');
            p.querySelectorAll('.objetivo').forEach(o => {
                o.classList.add('expanded');
            });
        });

        // Filter by period
        filterPeriodo.addEventListener('change', (e) => {
            const periodo = e.target.value;
            console.log('[v0] Filtrando por per√≠odo:', periodo);
            // Aqu√≠ ir√≠a la l√≥gica para filtrar datos seg√∫n el per√≠odo
        });

        // Filter by state
        filterEstado.addEventListener('change', (e) => {
            const estado = e.target.value;
            console.log('[v0] Filtrando por estado:', estado);
            
            // Ejemplo de filtrado: resaltar filas seg√∫n estado
            if (estado === 'cr√≠tico') {
                document.querySelectorAll('.indicadores-table tbody tr').forEach(row => {
                    const semaforo = row.querySelector('.semaforo');
                    if (semaforo && semaforo.classList.contains('rojo')) {
                        row.style.backgroundColor = 'rgba(239, 68, 68, 0.1)';
                    } else {
                        row.style.backgroundColor = 'transparent';
                    }
                });
            } else if (estado === 'alerta') {
                document.querySelectorAll('.indicadores-table tbody tr').forEach(row => {
                    const semaforo = row.querySelector('.semaforo');
                    if (semaforo && semaforo.classList.contains('amarillo')) {
                        row.style.backgroundColor = 'rgba(245, 158, 11, 0.1)';
                    } else {
                        row.style.backgroundColor = 'transparent';
                    }
                });
            } else if (estado === 'cumplido') {
                document.querySelectorAll('.indicadores-table tbody tr').forEach(row => {
                    const semaforo = row.querySelector('.semaforo');
                    if (semaforo && semaforo.classList.contains('verde')) {
                        row.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
                    } else {
                        row.style.backgroundColor = 'transparent';
                    }
                });
            } else {
                document.querySelectorAll('.indicadores-table tbody tr').forEach(row => {
                    row.style.backgroundColor = 'transparent';
                });
            }
        });

        // Export data
        if (btnExportarDatos) {
            btnExportarDatos.addEventListener('click', () => {
                console.log('[v0] Exportando reporte CMI');
                alert('Funcionalidad de exportaci√≥n en desarrollo\nSe generar√° un archivo CSV/PDF con los datos del CMI');
            });
        }

        // Refresh data
        if (btnRefrescarDatos) {
            btnRefrescarDatos.addEventListener('click', () => {
                console.log('[v0] Actualizando datos del Dashboard CMI');
                alert('Datos actualizados correctamente');
                // Aqu√≠ ir√≠a la l√≥gica para recargar datos de la BD
            });
        }

        console.log('[v0] Dashboard CMI inicializado correctamente');
    } else {
        console.log('[v0] Error: Elementos del Dashboard CMI no encontrados');
    }
    // Actualiza PR√ìXIMA SESI√ìN
    document.getElementById("proximaSesionContainer").innerHTML = `
        <p><strong>Fecha:</strong> ${nuevaSesion.fecha}</p>
        <p><strong>Hora:</strong> ${nuevaSesion.hora}</p>
        <p><strong>Lugar:</strong> ${nuevaSesion.lugar}</p>
        <p><strong>Estado:</strong> ${nuevaSesion.estado}</p>
        <p><strong>ID Sesi√≥n:</strong> ${nuevaSesion.id}</p>
    `;

    // Agregar al historial
    document.getElementById("comiteHistorialSesionBody").innerHTML += `
        <tr>
            <td>${nuevaSesion.fecha} ${nuevaSesion.hora}</td>
            <td>${nuevaSesion.estado}</td>
            <td>${nuevaSesion.id}</td>
        </tr>
    `;

    cerrarModalSesion();
    alert("Sesi√≥n creada correctamente");


function abrirModalSesion() {
    document.getElementById("modalNuevaSesion").style.display = "flex";
}

function cerrarModalSesion() {
    document.getElementById("modalNuevaSesion").style.display = "none";
}
    </script> <!-- si ten√©s un script inline antes, este cierre est√° bien -->

    <!-- Cargar script principal (solo una vez y bien cerrado) -->
    <script src="script_convocatoria.js"></script>
    <script src="script_visita.js"></script>
    


</body>
</html>


